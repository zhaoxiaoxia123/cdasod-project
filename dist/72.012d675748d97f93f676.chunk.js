webpackJsonp([72],{"9Ze4":function(e,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var t=s("WT6e"),r=s("Xjw4"),n=s("bfOx"),l=s("7DMc"),a=s("NOoU"),i=s("ntJC"),u=s("R12H"),c=s("xHjW"),d=s("bclE"),h=this&&this.__decorate||function(e,o,s,t){var r,n=arguments.length,l=n<3?o:null===t?t=Object.getOwnPropertyDescriptor(o,s):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,o,s,t);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(n<3?r(l):n>3?r(o,s,l):r(o,s))||l);return n>3&&l&&Object.defineProperty(o,s,l),l},m=this&&this.__metadata||function(e,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,o)},f=function(){function e(e,o,s,t,r,n,a){this.http=o,this.router=s,this.routInfo=t,this.cookieStore=r,this.globalService=n,this.notificationService=a,this.storehouse_id=0,this.storehouse_info=[],this.storehouseList=[],this.province=[],this.city=[],this.area=[],this.rollback_url="",this.permissions=[],this.province=Object(d.c)(),this.formModel=e.group({storehouse_id:[""],storehouse_name:["",[l.g.required,l.g.minLength(1)]],storehouse_status:[""],u_id:[""],storehouse_phone:[""],storehouse_notes:[""],storehouse_number:[""],storehouse_address:[""],storehouse_shortcode:[""],address1:[""],address2:[""],address3:[""]})}return e.prototype.ngOnInit=function(){var e=this;this.storehouse_id=this.routInfo.snapshot.params.storehouse_id,0!=this.storehouse_id?(this.getStorehouseInfo(this.storehouse_id),this.rollback_url+="/"+this.storehouse_id):this.rollback_url+="/0",this.getStorehouseDefault(),this.globalService.getMenuInfo(),setTimeout(function(){e.menu_id=e.globalService.getMenuId(),e.rollback_url=e.globalService.getMenuUrl(),e.permissions=e.globalService.getPermissions()},this.globalService.getMenuPermissionDelayTime())},e.prototype.isPermission=function(e,o){var s=e+"_"+o;return""==o&&(s=e),this.cookieStore.in_array(s,this.permissions)},e.prototype.showPinyin=function(){var e=this,o=this.formModel.value.storehouse_name;""!=o.trim()&&this.http.get(this.globalService.getDomain()+"/api/v1/getPinyin?name="+o).map(function(e){return e.json()}).subscribe(function(o){e.formModel.patchValue({storehouse_shortcode:o.result})})},e.prototype.getCity=function(){var e=this.formModel.value.address1;this.city=Object(d.b)(e),this.area=[]},e.prototype.getArea=function(){var e=this.formModel.value.address1,o=this.formModel.value.address2;this.area=Object(d.a)(e,o)},e.prototype.getStorehouseDefault=function(){var e=this;this.http.get(this.globalService.getDomain()+"/api/v1/getStorehouseDefault?sid="+this.cookieStore.getCookie("sid")).map(function(e){return e.json()}).subscribe(function(o){e.storehouseList=o,202==e.storehouseList.status&&(alert(e.storehouseList.msg),e.cookieStore.removeAll(e.rollback_url),e.router.navigate(["/auth/login"])),0==e.storehouse_id&&(e.address1_default=0,e.address2_default=0,e.address3_default=0,e.storehouse_status_default=1,e.u_id_default=e.storehouseList.result.userList.length>=1?e.storehouseList.result.userList[0].id:0)})},e.prototype.getStorehouseInfo=function(e){var o=this;this.http.get(this.globalService.getDomain()+"/api/v1/getStorehouseInfo?storehouse_id="+e).map(function(e){return e.json()}).subscribe(function(e){o.storehouse_info=e,o.formModel.patchValue({storehouse_id:o.storehouse_info.result.storehouse_id,storehouse_name:o.storehouse_info.result.storehouse_name,storehouse_status:o.storehouse_info.result.storehouse_status,u_id:o.storehouse_info.result.u_id,storehouse_phone:o.storehouse_info.result.storehouse_phone,storehouse_notes:o.storehouse_info.result.storehouse_notes,storehouse_number:o.storehouse_info.result.storehouse_number,storehouse_address:o.storehouse_info.result.storehouse_address,storehouse_shortcode:o.storehouse_info.result.storehouse_shortcode,address1:o.storehouse_info.result.address1,address2:o.storehouse_info.result.address2,address3:o.storehouse_info.result.address3}),0!=o.storehouse_info.result.address1&&o.getCity(),0!=o.storehouse_info.result.address2&&o.getArea()})},e.prototype.onSubmit=function(e){var o=this;if(""==this.formModel.value.storehouse_name.trim())return alert("\u8bf7\u586b\u5199\u4ed3\u5e93\u540d\u79f0\uff01"),!1;this.http.post(this.globalService.getDomain()+"/api/v1/addStorehouse",{storehouse_id:this.formModel.value.storehouse_id,storehouse_name:this.formModel.value.storehouse_name,storehouse_status:this.formModel.value.storehouse_status,u_id:this.formModel.value.u_id,storehouse_phone:this.formModel.value.storehouse_phone,storehouse_notes:this.formModel.value.storehouse_notes,storehouse_number:this.formModel.value.storehouse_number,storehouse_address:this.formModel.value.address1+","+this.formModel.value.address2+","+this.formModel.value.address3+","+this.formModel.value.storehouse_address,storehouse_shortcode:this.formModel.value.storehouse_shortcode,sid:this.cookieStore.getCookie("sid")}).subscribe(function(s){var t=JSON.parse(s._body);alert(t.msg),200==t.status?2==e?o.clear_():o.router.navigateByUrl("/tables/inventory"):202==t.status&&(o.cookieStore.removeAll(o.rollback_url),o.router.navigate(["/auth/login"]))})},e.prototype.clear_=function(){this.formModel.patchValue({storehouse_id:0,storehouse_name:"",storehouse_status:"",u_id:"",storehouse_phone:"",storehouse_notes:"",storehouse_number:"",storehouse_address:"",storehouse_shortcode:"",address1:"",address2:"",address3:""})},e.prototype.smartModEg1=function(){this.notificationService.smartMessageBox({title:"\u6dfb\u52a0",content:"\u8bf7\u5728\u65b0\u9875\u9762\u6dfb\u52a0\u9009\u9879\uff0c\u6dfb\u52a0\u5b8c\u6210\u540e\u5728\u5f53\u524d\u9875\u9762\u70b9\u51fb<i class='fa fa-link'></i>\u5237\u65b0\u6309\u94ae\u7ee7\u7eed\u9009\u62e9\uff08\u6ce8\uff1a\u5237\u65b0\u6309\u94ae\u53ea\u662f\u5c40\u90e8\u5237\u65b0\uff09",buttons:"[\u53d6\u6d88][\u786e\u5b9a]"},function(e){})},e=h([Object(t.Component)({selector:"app-add-inventory1",template:s("L5ho")}),m("design:paramtypes",[l.a,a.b,n.c,n.a,i.a,u.a,c.a])],e)}(),p=[{path:"",component:f}],b=n.d.forChild(p),_=s("pvSQ"),g=s("JOm+"),v=s("jfyD");s.d(o,"AddInventory1Module",function(){return y});var x=this&&this.__decorate||function(e,o,s,t){var r,n=arguments.length,l=n<3?o:null===t?t=Object.getOwnPropertyDescriptor(o,s):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,o,s,t);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(l=(n<3?r(l):n>3?r(o,s,l):r(o,s))||l);return n>3&&l&&Object.defineProperty(o,s,l),l},y=function(){function e(){}return e=x([Object(t.NgModule)({imports:[r.CommonModule,l.f,_.a,g.a,b],declarations:[f],providers:[v.CookieService,i.a]})],e)}()},L5ho:function(e,o){e.exports='\x3c!-- MAIN CONTENT --\x3e\r\n<div id="content">\r\n  \x3c!--<div class="row">--\x3e\r\n    \x3c!--<sa-big-breadcrumbs *ngIf="storehouse_id == 0" [items]="[\'\u4ed3\u5e93\u7ba1\u7406\', \'\u6dfb\u52a0\u4ed3\u5e93\']" icon="pencil-square-o" ></sa-big-breadcrumbs>--\x3e\r\n    \x3c!--<sa-big-breadcrumbs *ngIf="storehouse_id != 0" [items]="[\'\u4ed3\u5e93\u7ba1\u7406\', \'\u4fee\u6539\u4ed3\u5e93\']" icon="pencil-square-o" ></sa-big-breadcrumbs>--\x3e\r\n  \x3c!--</div>--\x3e\r\n  <sa-widgets-grid>\r\n    <div class="row">\r\n      <article class="col-sm-12 ">\r\n        \x3c!-- Widget ID (each widget will need unique ID)--\x3e\r\n        <sa-widget [editbutton]="false" [deletebutton]="false" >\r\n          <header  *ngIf="storehouse_id == 0">\r\n            <span class="widget-icon"> <i class="fa fa-edit"></i> </span>\r\n            <h2>\u6dfb\u52a0\u4ed3\u5e93</h2>\r\n          </header>\r\n          <header *ngIf="storehouse_id != 0">\r\n            <span class="widget-icon"> <i class="glyphicon glyphicon-pencil"></i> </span>\r\n            <h2 >\u4fee\u6539\u4ed3\u5e93 </h2>\r\n          </header>\r\n          <div>\r\n            \x3c!-- widget content --\x3e\r\n            <div class="widget-body no-padding">\r\n              \x3c!--(ngSubmit)="onSubmit()"--\x3e\r\n              <form id="smart-form-register" class="smart-form" [formGroup]="formModel" novalidate>\r\n                <fieldset>\r\n                  <legend>\u57fa\u672c\u4fe1\u606f</legend>\r\n                  <input type="hidden" name="storehouse_id" formControlName="storehouse_id" >\r\n                  <div class="form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 ">\r\n                    <section >\r\n                      <label class="label txt-color-blue">\u4ed3\u5e93\u7f16\u53f7<span class="asterisk-color">*</span></label>\r\n                      <label class="input">\r\n                        <input type="text" name="storehouse_number" formControlName="storehouse_number" maxlength="15" placeholder="\u81ea\u52a8\u7f16\u53f7"/>\r\n                      </label>\r\n                    </section>\r\n                  </div>\r\n                  <div class="form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 ">\r\n                    <section >\r\n                      <label class="label txt-color-blue">\u4ed3\u5e93\u540d\u79f0<span class="asterisk-color">*</span></label>\r\n                      <label class="input">\r\n                        <input type="text" name="storehouse_name" formControlName="storehouse_name" maxlength="15" placeholder="\u8bf7\u8f93\u5165\u4ed3\u5e93\u540d\u79f0"/>\r\n                      </label>\r\n                    </section>\r\n                  </div>\r\n                  <div class="form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 ">\r\n                    <section>\r\n                      <label class="label ">\u52a9\u8bb0\u7801</label>\r\n                      <label class="input">\r\n                        <input type="text" (blur)="showPinyin()" disabled="disabled" name="storehouse_shortcode" formControlName="storehouse_shortcode" placeholder="\u624b\u5de5\u5f55\u5165\u6216\u81ea\u52a8\u751f\u6210 " maxlength="20" />\r\n                      </label>\r\n                    </section>\r\n                  </div>\r\n                  <div class="form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 ">\r\n                    <label class="label "> \u8d1f\u8d23\u4eba</label>\r\n                    <section >\r\n                      <div class="input-group">\r\n                        <label   class="select form-control border-0">\r\n                          <select name="u_id" formControlName="u_id" [(ngModel)]="u_id_default">\r\n                            <option *ngFor="let u of storehouseList.result?.userList" [selected]="storehouse_info.result?.u_id == u.id || this.storehouse_id == 0" value="{{u.id}}">{{u.u_username}}</option>\r\n                          </select> <i></i> </label>\r\n                        <div class="input-group-btn">\r\n                          <a  href="http://cn.i3ot.com/#/forms/employees/0" target="_blank" (click)="smartModEg1()" class="btn btn-default btn-sm pb-6" type="button">\r\n                            \x3c!-- <i class="fa fa-plus "></i>--\x3e \u6dfb\u52a0\r\n                          </a>\r\n                          <a class="btn btn-default btn-sm pb-6" type="button" (click)="getStorehouseDefault()"><i class="fa fa-link"></i>\r\n                            \u5237\u65b0\r\n                          </a>\r\n\r\n                        </div>\r\n                      </div>\r\n                    </section>\r\n                  </div>\r\n                 \x3c!-- <div class="form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 ">\r\n                    <section >\r\n                      <label class="label  ">\u8054\u7cfb\u7535\u8bdd</label>\r\n                      <label class="input"> <i class="icon-append fa fa-phone"></i>\r\n                        <input name=""  placeholder="\u8bf7\u8f93\u5165\u7535\u8bdd\u53f7\u7801" maxlength="12">\r\n                      </label>\r\n                    </section>\r\n                  </div>--\x3e\r\n                  <div class="form-group col col-lg-6 col-md-6 col-sm-6 col-xs-12 ">\r\n                    <div class="margin-left-15">\r\n                      <section class="col col-4">\r\n                        <label class="label ">\u5730\u5740</label>\r\n                        <label class="select ">\r\n                          <select name="address1"  formControlName="address1" [(ngModel)]="address1_default" (change)="getCity()">\r\n                            <option value="0">--\u8bf7\u9009\u62e9\u7701--</option>\r\n                            <option *ngFor="let p of province" [selected]="storehouse_info.result?.address1 == p" value="{{p}}">{{p}}</option>\r\n                          </select> <i></i> </label>\r\n                      </section>\r\n                      <section class="col col-4">\r\n                        <label class="select margin-top-24">\r\n                          <select name="address2"  formControlName="address2" [(ngModel)]="address2_default" (change)="getArea()">\r\n                            <option value="0">--\u8bf7\u9009\u62e9\u5e02--</option>\r\n                            <option *ngFor="let c of city" [selected]="storehouse_info.result?.address2 == c" value="{{c}}">{{c}}</option>\r\n                          </select> <i></i> </label>\r\n                      </section>\r\n                      <section class="col col-4">\r\n                        <label class="select margin-top-24">\r\n                          <select name="address3"  formControlName="address3" [(ngModel)]="address3_default">\r\n                            <option value="0">--\u8bf7\u9009\u62e9\u533a--</option>\r\n                            <option *ngFor="let a of area" [selected]="storehouse_info.result?.address3 == a" value="{{a}}">{{a}}</option>\r\n                          </select> <i></i> </label>\r\n                      </section>\r\n                    </div>\r\n                  </div>\r\n                  <div class="form-group col col-lg-6 col-md-6 col-sm-6 col-xs-12 ">\r\n                    <section >\r\n                      <label class="label ">\u8be6\u7ec6\u5730\u5740</label>\r\n                      <label class="input">\r\n                        <input name=\'storehouse_address\' formControlName="storehouse_address" placeholder="\u8bf7\u8f93\u5165\u8be6\u7ec6\u5730\u5740"  type="text" maxlength="20">\r\n                      </label>\r\n                    </section>\r\n                  </div>\r\n                  <div class="form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 ">\r\n                    <section >\r\n                      <label class="label "> \u4ed3\u5e93\u72b6\u6001</label>\r\n                      <label class="select">\r\n                        <select name="storehouse_status" formControlName="storehouse_status" [(ngModel)]="storehouse_status_default">\r\n                          <option value="1" [selected]="storehouse_info.result?.storehouse_status == 1">\u6b63\u5e38</option>\r\n                          <option value="2" [selected]="storehouse_info.result?.storehouse_status == 2">\u7ef4\u4fee</option>\r\n                          <option value="3" [selected]="storehouse_info.result?.storehouse_status == 3">\u6ee1\u4ed3</option>\r\n                          <option value="0" >\u65e0\u6548</option>\r\n                        </select> <i></i>\r\n                      </label>\r\n                    </section>\r\n                  </div>\r\n                  <div class="form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 ">\r\n                    <section >\r\n                      <label class="label"> \u56fa\u5b9a\u7535\u8bdd</label>\r\n                      <label class="input"> <i class="icon-append fa fa-phone"></i>\r\n                        <input formControlName="storehouse_phone" maxlength="13" name="storehouse_phone" placeholder="\u8bf7\u8f93\u5165\u4fdd\u7ba1\u5ba4\u5ea7\u673a" samaskedinput="(999) 999-9999" type="tel" ng-reflect-sa-masked-input="(999) 999-9999" aria-required="true" class="valid" aria-invalid="false">\r\n                      </label>\r\n                    </section>\r\n                  </div>\r\n                  <div class="form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 ">\r\n                    <section>\r\n                      <label class="label">\u5907\u6ce8</label>\r\n                      <label class="textarea textarea-resizable">\r\n                      <textarea class="custom-scroll" rows="3" formControlName="storehouse_notes" name="storehouse_notes">\r\n                      </textarea>\r\n                      </label>\r\n                    </section>\r\n                  </div>\r\n                  <div class="row">\r\n\r\n                    \x3c!--<section class="col col-6">--\x3e\r\n                      \x3c!--<label class="label">\u603b\u5e93\u5b58\u91cf</label>--\x3e\r\n                      \x3c!--<label class="input">--\x3e\r\n                        \x3c!--<input type="text" name="storehouse_total_quantity" maxlength="10" formControlName="storehouse_total_quantity" placeholder="\u8bf7\u8f93\u5165\u4ed3\u5e93\u603b\u5e93\u5b58\u91cf"/>--\x3e\r\n                      \x3c!--</label>--\x3e\r\n                    \x3c!--</section>--\x3e\r\n\r\n\r\n                  </div>\r\n\r\n                </fieldset>\r\n                <footer>\r\n                  <button type="button" class="btn btn-default" >\r\n                    \u8fd4\u56de\r\n                  </button>\r\n\r\n                  <div *ngIf="isPermission(menu_id,\'add\') || isPermission(menu_id,\'edit\')">\r\n                  <button class="btn btn-success" type="button" (click)="onSubmit(2)">\u4fdd\u5b58\u5e76\u65b0\u589e</button>\r\n                  <button type="button" class="btn btn-primary" (click)="onSubmit(1)">\r\n                    \u4fdd\u5b58\r\n                  </button>\r\n                  </div>\r\n                </footer>\r\n              </form>\r\n\r\n            </div>\r\n            \x3c!-- end widget content --\x3e\r\n          </div>\r\n          \x3c!-- end widget div --\x3e\r\n        </sa-widget>\r\n      </article>\r\n      \x3c!-- END COL --\x3e\r\n    </div>\r\n    \x3c!-- END ROW --\x3e\r\n  </sa-widgets-grid>\r\n  \x3c!-- end widget grid --\x3e\r\n</div>\r\n'}});