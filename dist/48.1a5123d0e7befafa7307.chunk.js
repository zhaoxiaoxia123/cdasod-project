webpackJsonp([48],{"0WNG":function(t,e){t.exports='<div id="content">\r\n  <sa-widgets-grid>\r\n    <div class="row">\r\n      <article class="col-sm-12 ">\r\n        <sa-widget [editbutton]="false" [deletebutton]="false" [colorbutton]="false">\r\n          <header>\r\n            <span class="widget-icon"> <i class="fa {{menuInfos?.menu_icon}}"></i> </span>\r\n            <h2>{{menuInfos?.menu_name}}</h2>\r\n          </header>\r\n          <div>\r\n            <div class="widget-body no-padding" >\r\n              <div  class="row">\r\n                <article  class="col-sm-12">\r\n                  <div class="navbar navbar-default">\r\n                    <form  class="navbar-form navbar-left ng-pristine ng-valid ng-touched" novalidate="" role="search" >\r\n                      <div class="form-group pdlr-4" *ngIf="isPermission(menu_id,\'add\')">\r\n                        <a class="btn btn-success btn-sm" (click)="detailDepartment(\'add\',0)" >\r\n                          <span class="glyphicon glyphicon-plus mr-5"></span>\u6dfb\u52a0</a>\r\n                      </div>\r\n                      <div class="form-group pdlr-4" *ngIf="isPermission(menu_id,\'edit\')">\r\n                        <a [ngClass]="{\'btn default-btn btn-sm\':true,\'not-click\':isStatus == 0}" (click)="detailDepartment(\'edit\',0)">\r\n                          <span class="glyphicon glyphicon-pencil mr-5 color-yellow"></span>\u4fee\u6539</a>\r\n                      </div>\r\n                      <div class="form-group pdlr-4" *ngIf="isPermission(menu_id,\'delete\')">\r\n                        <a [ngClass]="{\'btn default-btn btn-sm\':true,\'not-click\':isStatus == 0}" (click)="deleteDepartment(\'id\')">\r\n                          <span class="fa-fw fa  fa-trash-o mr-5 color-red"></span>\u5220\u9664</a>\r\n                      </div>\r\n                      <div class="form-group pdlr-4" *ngIf="isPermission(menu_id,\'detail\')">\r\n                        <a [ngClass]="{\'btn default-btn btn-sm\':true,\'not-click\':isStatus == 0}" (click)="detailDepartment(\'detail\',0)" >\r\n                          <span class="glyphicon glyphicon-zoom-in mr-5 color-green"></span>\u8be6\u60c5</a>\r\n                      </div>\r\n                      <div class="form-group pdlr-4" *ngIf="isStatus == 2 && isPermission(menu_id,\'edit\')">\r\n                        <a class="btn default-btn btn-sm" (click)="editStatus(1,\'id\')" >\r\n                          <span class="fa-fw fa fa-play mr-5 color-green"></span>\u542f\u7528</a>\r\n                      </div>\r\n                      <div class="form-group pdlr-4" *ngIf="isStatus == 1 && isPermission(menu_id,\'edit\')">\r\n                        <a class="btn default-btn btn-sm" (click)="editStatus(2,\'id\')" >\r\n                          <span class="fa-fw fa fa-stop mr-5 txt-color-blueDark"></span>\u65e0\u6548</a>\r\n                      </div>\r\n                      <div class="form-group btn-group pdlr-4" *ngIf="isPermission(menu_id,\'edit\') || isPermission(menu_id,\'delete\')">\r\n                        <a class="btn default-btn btn-sm dropdown-toggle"  data-toggle="dropdown" (click)="showAllCheck()">\r\n                          <span class="fa-fw fa fa-th-large mr-5 color-red"></span>\u6279\u5904\u7406<i class="fa fa-fw fa-chevron-down"></i></a>\r\n                        <ul class="dropdown-menu" role="menu">\r\n                          <li *ngIf="isPermission(menu_id,\'edit\')"><a (click)="editStatus(1,\'all\')" ><span class="fa-fw fa fa-play mr-5 color-green"></span>\u6279\u91cf\u8bbe\u4e3a\u542f\u52a8</a></li>\r\n                          <li *ngIf="isPermission(menu_id,\'edit\')"><a (click)="editStatus(2,\'all\')" ><span class="fa-fw fa fa-stop mr-5 txt-color-blueDark"></span>\u6279\u91cf\u8bbe\u4e3a\u65e0\u6548</a></li>\r\n                          <li class="divider"></li>\r\n                          <li *ngIf="isPermission(menu_id,\'delete\')"><a (click)="deleteDepartment(\'all\')" ><span class="fa-fw fa  fa-trash-o color-red mr-5"></span>\u6279\u91cf\u5220\u9664</a></li>\r\n                        </ul>\r\n                      </div>\r\n                    </form>\r\n                    <form  class="navbar-form navbar-left ng-pristine ng-valid ng-touched" novalidate="" role="search" >\r\n                      <div class="form-group pdlr-4">\r\n                        <input  class="form-control ng-pristine ng-valid ng-touched" maxlength="15" name="keyword" [(ngModel)]="keyword" placeholder="\u8bf7\u8f93\u5165\u641c\u7d22\u5185\u5bb9" type="text">\r\n                      </div>\r\n                      <div class="form-group pdlr-4">\r\n                        <button class="btn btn-default" type="button" (click)="getDepartmentList(1,0)">\r\n                          <i  class="glyphicon glyphicon-search"></i>\r\n                          \u641c\u7d22\r\n                        </button>\r\n                      </div>\r\n                    </form>\r\n                  </div>\r\n                </article>\r\n              </div>\r\n\r\n              <div class="pt">\r\n                <article class="form-group col col-xs-4">\r\n                  <sa-widget class="jarviswidget well" [colorbutton]="false" [editbutton]="false" [togglebutton]="false"\r\n                             [deletebutton]="false" [fullscreenbutton]="false" [custombutton]="false" [sortable]="false">\r\n                    <div>\r\n                      <div class="widget-body no-padding">\r\n                        <alert type="info" class="no-margin"  >\r\n                          <i class="fa-fw fa fa-sitemap"></i>\r\n                          \u90e8\u95e8\u5206\u7c7b\r\n                        </alert>\r\n                        <div class="pd-10 mt-10 height-overflow">\r\n                          <div class="widget-body">\r\n                            <div class="tree smart-form">\r\n                              <ul class="">\r\n                                <li class=" parent_li">\r\n                                  <span>\r\n                                    <label class="checkbox inline-block tree-label pt-12 ">\r\n                                    <input type="checkbox" name="checkbox-inline" [checked]="select_department_ids[0]" (click)="selectDepartmentAll()" ><i></i>\r\n                                  </label>\r\n                                    <i class="fa fa-lg fa-folder-open"></i>{{customer_name}}\r\n                                    <i class="sa-icon fa fa-lg fa-plus-circle" *ngIf="showUl == 0" (click)="showLeftUl(1)"></i>\r\n                                    <i class="sa-icon fa fa-lg fa-minus-circle" *ngIf="showUl == 1" (click)="showLeftUl(0)"></i>\r\n                                  </span>\r\n                                  <ul class="" *ngIf="showUl == 1">\r\n                                    <li *ngFor="let d of departmentDefault?.result?.departmentList;let ind = index;">\r\n                                    <span>\r\n                                      <label class="checkbox inline-block tree-label">\r\n                                        <input type="checkbox" name="checkbox-inline" [checked]="select_department_ids[d.department_id]" (click)="selectDepartment(d.department_id,ind,0,1)"><i></i>{{d.department_name}}\r\n                                            <em class="txt-color-blue">({{d.child_count}})</em>\r\n                                      </label>\r\n                                      <i class="sa-icon fa fa-lg fa-minus-circle" *ngIf="showUlChild == d.department_id && d.child_count != 0" (click)="showLeftUlChild(0)"></i>\r\n                                      <i class="sa-icon fa fa-lg fa-plus-circle" *ngIf="showUlChild != d.department_id && d.child_count != 0" (click)="showLeftUlChild(d.department_id)"></i>\r\n                                    </span>\r\n                                      <ul class="" *ngIf="showUlChild == d.department_id">\r\n                                        <li *ngFor="let dc of d.child;let indChild = index;">\r\n                                        <span>\r\n                                          <label class="checkbox inline-block tree-label">\r\n                                            <input type="checkbox" name="checkbox-inline" [checked]="select_department_ids[d.department_id] || select_department_ids[dc.department_id]" (click)="selectDepartment(dc.department_id,ind,indChild,d.department_id)">\r\n                                            <i></i>{{dc.department_name}}\r\n                                          </label>\r\n                                        </span>\r\n                                        </li>\r\n                                      </ul>\r\n                                    </li>\r\n                                  </ul>\r\n                                </li>\r\n                              </ul>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div class="dt-toolbar">\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </sa-widget>\r\n                </article>\r\n                <article class="form-group col col-xs-8">\r\n                  <sa-widget class="jarviswidget well" [colorbutton]="false" [editbutton]="false" [togglebutton]="false"\r\n                             [deletebutton]="false" [fullscreenbutton]="false" [custombutton]="false" [sortable]="false">\r\n                    <div>\r\n                      <div class="widget-body no-padding">\r\n                        <alert type="info" class="no-margin" >\r\n                          <i class="fa-fw fa fa-table"></i>\r\n                          \u90e8\u95e8\u5217\u8868\r\n                        </alert>\r\n                        <div class="mt-10 height-overflow" style="padding:0;">\r\n                          <div *ngIf="isAll != 0"  [ngStyle]="{\'padding\': \'0\',\'z-index\': \'2\',\'width\':width,\'float\':\'left\'}" class="table-scrolling">\r\n                            <table class="table table-striped  smart-form table-height-20">\r\n                              <thead>\r\n                              <tr style="height: 37px;">\r\n                                <td><label class="checkbox mt-8">\r\n                                  <input type="checkbox" name="checkbox-inline" [checked]="check" (change)="changeCheckAll($event)" >\r\n                                  <i></i>\r\n                                </label>\r\n                                </td>\r\n                              </tr>\r\n                              </thead>\r\n                              <tbody>\r\n                              <tr style="height: 34.5px;" *ngFor="let d of departmentList.result?.departmentList?.data">\r\n                                <td>\r\n                                  <label class="checkbox mt-8">\r\n                                    <input type="checkbox" value="{{ d.department_id }}" [checked]="selects[d.department_id]" (change)="handle($event)" >\r\n                                    <i></i>\r\n                                  </label>\r\n                                </td>\r\n                              </tr>\r\n                              </tbody>\r\n                            </table>\r\n                          </div>\r\n                          <div style="padding: 0;z-index: 2;width:30%;float:left;" class="table-scrolling">\r\n                            <table class="table table-striped  smart-form table-height-20">\r\n                              <thead>\r\n                              <tr >\r\n                                <th>\u90e8\u95e8\u7f16\u53f7</th>\r\n                                <th>\u90e8\u95e8\u540d\u79f0</th>\r\n                              </tr>\r\n                              </thead>\r\n                              <tbody>\r\n                              <tr *ngFor="let d of departmentList.result?.departmentList?.data" (click)="isStatusShow(d.department_id,d.department_status)" [ngClass]="{\'table-color\':editStatusDepartmentId == d.department_id}">\r\n                                <td><div class="click-a"><a (click)="detailDepartment(\'detail\', d.department_id )">{{d.department_number}}</a></div> </td>\r\n                                <td class="details-control">{{d.department_name}}</td>\r\n                              </tr>\r\n                              </tbody>\r\n                            </table>\r\n                          </div>\r\n                          <div [ngStyle]="{\'padding\': \'0\',\'z-index\': \'1\',\'width\':width_1,\'float\':\'left\'}" class="table-responsive">\r\n                            <table class="table table-striped   smart-form table-height-20">\r\n                              <thead>\r\n                              <tr>\r\n                                <th>\u4e0a\u7ea7\u90e8\u95e8</th>\r\n                                <th>\u90e8\u95e8\u5c42\u7ea7</th>\r\n                                <th>\u90e8\u95e8\u8d1f\u8d23\u4eba</th>\r\n                                <th>\u521b\u5efa\u65e5\u671f</th>\r\n                                <th>\u90e8\u95e8\u5c5e\u6027 </th>\r\n                                <th>\u90e8\u95e8\u7535\u8bdd </th>\r\n                                <th>\u90e8\u95e8\u4f20\u771f </th>\r\n                                <th>\u90e8\u95e8\u72b6\u6001 </th>\r\n                              </tr>\r\n                              </thead>\r\n                              <tbody>\r\n                              <tr *ngFor="let d of departmentList.result?.departmentList?.data" (click)="isStatusShow(d.department_id,d.department_status)" [ngClass]="{\'table-color\':editStatusDepartmentId == d.department_id}">\r\n                                <td>\r\n                                  <span [ngSwitch]="d.upper_department_id">\r\n                                    <span *ngSwitchCase="0">\u4e00\u7ea7\u90e8\u95e8</span>\r\n                                    <span *ngSwitchDefault>{{d.parent_department}}</span>\r\n                                  </span>\r\n                                </td>\r\n                                <td>\r\n                                  <span [ngSwitch]="d.upper_department_id">\r\n                                    <span *ngSwitchCase="0">\u4e00\u7ea7</span>\r\n                                    <span *ngSwitchDefault>\u4e8c\u7ea7</span>\r\n                                  </span></td>\r\n                                <td>{{d.u_username}}</td>\r\n                                <td>{{d.created_at}}</td>\r\n                                <td>{{d.department_attribute}}</td>\r\n                                <td>{{d.department_phone}}</td>\r\n                                <td>{{d.department_fax}}</td>\r\n                                <td>\r\n                                  <span [ngSwitch]="d.department_status">\r\n                                    <span class="label-normal" *ngSwitchCase="1">\u6b63\u5e38</span>\r\n                                    <span class="label-invalid" *ngSwitchCase="2">\u65e0\u6548</span>\r\n                                    <span class=" label-unknown" *ngSwitchDefault>\u672a\u77e5</span>\r\n                                  </span>\r\n                                </td>\r\n                              </tr>\r\n                              </tbody>\r\n                            </table>\r\n                          </div>\r\n                        </div>\r\n                        \x3c!-- \u5e95\u90e8-\uff08\u5206\u9875\u90e8\u5206\uff09--\x3e\r\n                        <div class="dt-toolbar">\r\n                          <div class="col-xs-12 col-sm-6">\r\n                            <span>\u5171{{departmentList?.result?.departmentList?.total}}\u6761</span>\r\n                          </div>\r\n                          <div class="hidden-xs right">\r\n                            <ul class="pagination pagination-sm">\r\n                              <li *ngFor="let p of departmentList?.result?.page" class="{{p.class}}">\r\n                                <a (click)="pagination(p.value)" *ngIf="p.method==\'method\'">{{p.text}}</a>\r\n                                <a *ngIf="p.method==\'\'">{{p.text}}</a>\r\n                              </li>\r\n                            </ul>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </sa-widget>\r\n                  \x3c!-- end widget --\x3e\r\n                </article>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </sa-widget>\r\n      </article>\r\n    </div>\r\n  </sa-widgets-grid>\r\n\r\n\r\n\r\n  <div class="modal fade" bsModal #lgModal="bs-modal">\r\n    <div class="modal-dialog">\r\n      <div class="modal-content">\r\n        <div class="modal-header">\r\n          \x3c!-- \u5173\u95ed\u6309\u94ae --\x3e\r\n          <button type="button" class="close" (click)="closeSubmit();lgModal.hide();" aria-hidden="true"> \xd7 </button>\r\n          \x3c!-- \u6807\u9898 --\x3e\r\n          <h3 *ngIf="editStatusDepartmentId == 0" class="modal-title txt-color-blue" data-ng-bind=\'results.title\'><i class="fa-fw fa fa-plus"></i>\u6dfb\u52a0\u90e8\u95e8</h3>\r\n          <h3 *ngIf="editStatusDepartmentId != 0" class="modal-title   color-yellow" data-ng-bind=\'results.title\'><i class="glyphicon glyphicon-pencil"></i>\u4fee\u6539\u90e8\u95e8</h3>\r\n        </div>\r\n        <div class="modal-body">\r\n          <sa-widget [editbutton]="false" [fullscreenbutton]="false" [custombutton]="false" [sortable]="false">\r\n            <header>\r\n              <ul class="nav nav-tabs pull-left in">\r\n                <li [class.active]="state.tabs.demo3==\'hr1\'" class="active">\r\n                  <a (click)="state.tabs.demo3 = \'hr1\'">\u57fa\u672c\u4fe1\u606f</a>\r\n                </li>\r\n                <li [class.active]="state.tabs.demo3==\'hr2\'" class="active">\r\n                  <a (click)="state.tabs.demo3 = \'hr2\'">\u5176\u4ed6\u4fe1\u606f</a>\r\n                </li>\r\n              </ul>\r\n            </header>\r\n            <div>\r\n              <div class="widget-body">\r\n                <tabset>\r\n                  <tab [active]="state.tabs.demo3 == \'hr1\'">\r\n                    <tabset >\r\n                      <tab [active]="state.tabs.demo3 == \'hr1\'">\r\n                        <div class="row">\r\n                          <form class="smart-form " [formGroup]="formModel">\r\n                            <input type="hidden" name="department_id" formControlName="department_id">\r\n                            <fieldset>\r\n                              <div class="form-group col col-lg-6 col-md-6 col-sm-6 col-xs-12">\r\n                                <section>\r\n                                  <label class="label txt-color-blue">\u90e8\u95e8\u540d\u79f0<span class="asterisk-color">*</span></label>\r\n                                  <label class="input">\r\n                                    <input type="text" placeholder="" name="department_name" formControlName="department_name">\r\n                                  </label>\r\n                                </section>\r\n                              </div>\r\n                              <div class="form-group col col-lg-6 col-md-6 col-sm-6 col-xs-12">\r\n                                <section>\r\n                                  <label class="label">\u52a9\u8bb0\u7801</label>\r\n                                  <label class="input">\r\n                                    <input type="text" (blur)="showPinyin()" disabled name="department_shortcode"  formControlName="department_shortcode" placeholder="\u624b\u5de5\u5f55\u5165\u6216\u81ea\u52a8\u751f\u6210"  >\r\n                                  </label>\r\n                                </section>\r\n                              </div>\r\n                              <div class="form-group col col-lg-6 col-md-6 col-sm-6 col-xs-12">\r\n                                <section>\r\n                                  <label class="label txt-color-blue">\u90e8\u95e8\u7f16\u53f7<span class="asterisk-color">*</span></label>\r\n                                  <label class="input">\r\n                                    <input type="text" name="department_number" formControlName="department_number" placeholder="\u81ea\u52a8\u7f16\u7801" >\r\n                                  </label>\r\n                                </section>\r\n                              </div>\r\n                              <div class="form-group col col-lg-6 col-md-6 col-sm-6 col-xs-12">\r\n                                <section>\r\n                                  <label class="label">\u4e0a\u7ea7\u90e8\u95e8</label>\r\n                                  <label class="select">\r\n                                      <select name="upper_department_id" formControlName="upper_department_id" [(ngModel)]="upper_department_id_default">\r\n                                        <option [selected]="editStatusDepartmentId == 0" value="0">--\u8bf7\u9009\u62e9--</option>\r\n                                        <option *ngFor="let dd of departmentDefault.result?.departmentList" [selected]="departmentInfo.result?.upper_department_id == dd.department_id" value="{{ dd.department_id }}">{{dd.department_name}}</option>\r\n                                      </select><i></i>\r\n                                  </label>\r\n                                </section>\r\n                              </div>\r\n                              <div class="form-group col col-lg-6 col-md-6 col-sm-6 col-xs-12">\r\n                                <section>\r\n                                  <label class="label">\u90e8\u95e8\u5c5e\u6027</label>\r\n                                  <label class="input">\r\n                                    <input type="text" placeholder="" name="department_attribute" formControlName="department_attribute">\r\n                                  </label>\r\n                                </section>\r\n                              </div>\r\n                              <div class="form-group col col-lg-6 col-md-6 col-sm-6 col-xs-12">\r\n                                <section>\r\n                                  <label class="label ">\u8d1f\u8d23\u4eba</label>\r\n                                  <label class="select">\r\n                                      <select name="department_incharge" formControlName="department_incharge" [(ngModel)]="department_incharge_default">\r\n                                        <option [selected]="editStatusDepartmentId == 0" value="0">--\u8bf7\u9009\u62e9--</option>\r\n                                        <option *ngFor="let du of departmentDefault.result?.user" [selected]="departmentInfo.result?.department_incharge == du.id" value="{{ du.id }}">{{du.u_username}}</option>\r\n                                      </select><i></i>\r\n                                  </label>\r\n                                </section>\r\n                              </div>\r\n                              <div class="form-group col col-lg-6 col-md-6 col-sm-6 col-xs-12">\r\n                                <section >\r\n                                  <label class="label  ">\u7535\u8bdd</label>\r\n                                  <label class="input"> <i class="icon-append fa fa-phone"></i>\r\n                                    <input name="department_phone" formControlName="department_phone" placeholder="\u8bf7\u8f93\u5165\u7535\u8bdd\u53f7\u7801" maxlength="12">\r\n                                  </label>\r\n                                </section>\r\n                              </div>\r\n                              <div class="form-group col col-lg-6 col-md-6 col-sm-6 col-xs-12">\r\n                                <section>\r\n                                  <label class="label txt-color-blue">\u4f20\u771f</label>\r\n                                  <label class="input">\r\n                                    <input type="text" placeholder="" name="department_fax" formControlName="department_fax">\r\n                                  </label>\r\n                                </section>\r\n                              </div>\r\n                              <div class="form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12">\r\n                                <section>\r\n                                  <label class="label">\u5907\u6ce8</label>\r\n                                  <label class="textarea textarea-resizable">\r\n                                    <textarea class="custom-scroll" rows="2" name="department_remark" formControlName="department_remark"></textarea>\r\n                                  </label>\r\n                                </section>\r\n                              </div>\r\n\r\n                            </fieldset>\r\n                          </form>\r\n                        </div>\r\n                      </tab>\r\n                    </tabset>\r\n                  </tab>\r\n                  <tab [active]="state.tabs.demo3 == \'hr2\'">\r\n                    <tabset >\r\n                      <tab [active]="state.tabs.demo3 == \'hr2\'">\r\n                        <div class="row">\r\n                          <form  [formGroup]="formModel" class="smart-form ">\r\n                            <fieldset>\r\n                              <div class="form-group col col-lg-6 col-md-6 col-sm-6 col-xs-12">\r\n                                <section >\r\n                                  <label class="label ">\u521b\u5efa\u4eba</label>\r\n                                  <label class="input">\r\n                                    <input disabled="disabled" name="u_username" formControlName="u_username" type="text" placeholder="\u7528\u6237\u540d">\r\n                                  </label>\r\n                                </section>\r\n                              </div>\r\n                            </fieldset>\r\n                          </form>\r\n                        </div>\r\n                      </tab>\r\n                    </tabset>\r\n                  </tab>\r\n                </tabset>\r\n              </div>\r\n            </div>\r\n          </sa-widget>\r\n        </div>\r\n        <div class="modal-footer">\r\n          <div *ngIf="isPermission(menu_id,\'add\') || isPermission(menu_id,\'edit\')">\r\n            <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="onSubmit(1);">\u4fdd\u5b58</button>\r\n            <button class="btn btn-success" type="button" (click)="onSubmit(2);">\u4fdd\u5b58\u5e76\u65b0\u589e</button>\r\n          </div>\r\n          <button type="button" class="btn btn-default" (click)="closeSubmit();lgModal.hide()" >\u8fd4\u56de</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="modal fade" bsModal #detailModal="bs-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n  <div class="modal-dialog">\r\n    <div class="modal-content">\r\n      <div class="modal-header">\r\n        \x3c!-- \u5173\u95ed\u6309\u94ae --\x3e\r\n        <button type="button" class="close" (click)="closeSubmit();detailModal.hide()" aria-hidden="true">\r\n          \xd7\r\n        </button>\r\n        \x3c!-- \u6807\u9898 --\x3e\r\n        <h3 class="modal-title" data-ng-bind=\'results.title\'></h3>\r\n        <h4 class="modal-title">{{departmentInfo?.result?.department_name}}-{{departmentInfo?.result?.department_number}}</h4>\r\n      </div>\r\n      <div class="modal-body height-overflow-380">\r\n        <div class="row ">\r\n          <div class="col-sm-12">\r\n            <div class="" >\r\n              <P class="alert alert-info">\u57fa\u672c\u4fe1\u606f</P>\r\n              <table class="table table-striped table-forum">\r\n                <tbody>\r\n                <tr>\r\n                  <td class="width-120">\u90e8\u95e8\u540d\u79f0:</td>\r\n                  <td class="">{{departmentInfo?.result?.department_name}}</td>\r\n                  <td class="width-120">\u52a9\u8bb0\u7801:</td>\r\n                  <td >\r\n                    <span >{{departmentInfo?.result?.department_shortcode}}</span>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td class="width-120">\u90e8\u95e8\u7f16\u53f7:</td>\r\n                  <td class="">{{departmentInfo?.result?.department_number}}</td>\r\n                  <td class="width-120">\u90e8\u95e8\u5c5e\u6027\uff1a</td>\r\n                  <td class="">{{departmentInfo?.result?.department_attribute}}</td>\r\n                </tr>\r\n                <tr *ngIf="departmentInfo?.result?.upper_department_id != 0">\r\n                  <td class="width-120">\u4e0a\u7ea7\u90e8\u95e8\uff1a</td>\r\n                  <td class="" colspan="3">{{departmentInfo?.result?.upper_department}}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td class="width-120">\u8d1f\u8d23\u4eba:</td>\r\n                  <td class="">{{departmentInfo?.result?.incharge}}</td>\r\n                  <td class="width-120">\u7535\u8bdd\uff1a</td>\r\n                  <td class="">{{departmentInfo?.result?.department_phone}}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td class="width-120">\u4f20\u771f\uff1a</td>\r\n                  <td class="" colspan="3">{{departmentInfo?.result?.department_fax}}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td class="width-120">\u5907\u6ce8\uff1a</td>\r\n                  <td class="" colspan="3">{{departmentInfo?.result?.department_remark}}</td>\r\n                </tr>\r\n                </tbody>\r\n              </table>\r\n              <P class="alert alert-info">\u5176\u4ed6\u4fe1\u606f</P>\r\n              <table class="table table-striped table-forum">\r\n                <tbody>\r\n                <tr>\r\n                  <td class="width-120">\u521b\u5efa\u4eba:</td>\r\n                  <td class="" colspan="3">{{departmentInfo?.result?.u_username}}</td>\r\n                </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="modal-footer">\r\n        <button type="button" class="btn btn-default" (click)="closeSubmit();detailModal.hide()" >\u8fd4\u56de</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>'},VK8v:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("WT6e"),a=n("Xjw4"),s=n("bfOx"),i=n("R12H"),l=n("ntJC"),d=n("NOoU"),o=n("7DMc"),c=n("Exih"),p=n("OMJi"),m=this&&this.__decorate||function(t,e,n,r){var a,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(i=(s<3?a(i):s>3?a(e,n,i):a(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},h=function(){function t(t,e,n,r,a){this.http=e,this.router=n,this.cookieStore=r,this.globalService=a,this.state={tabs:{demo1:0,demo2:"tab-r1",demo3:"hr1"}},this.departmentList=[],this.departmentDefault=[],this.departmentInfo=[],this.prev=!1,this.next=!1,this.upper_department_id_default=0,this.department_incharge_default=0,this.selects=[],this.check=!1,this.select_department_ids=[],this.showUl=1,this.showUlChild=0,this.editStatusDepartmentId=0,this.isStatus=0,this.isAll=0,this.width="0%",this.width_1="70%",this.customer_name="",this.keyword="",this.rollback_url="",this.permissions=[],this.menuInfos=[],window.scrollTo(0,0),this.getDepartmentDefault(),this.formModel=t.group({department_id:[""],department_name:[""],department_number:[""],department_shortcode:[""],upper_department_id:[""],department_attribute:[""],department_incharge:[""],department_phone:[""],department_fax:[""],department_remark:[""],department_status:[""],u_username:[""]})}return t.prototype.ngOnInit=function(){var t=this;this.customer_name=this.cookieStore.getCookie("c_name"),this.globalService.getMenuInfo(),setTimeout(function(){t.menu_id=t.globalService.getMenuId(),t.rollback_url=t.globalService.getMenuUrl(),t.permissions=t.globalService.getPermissions(),t.menuInfos=t.globalService.getMenuInfos()},this.globalService.getMenuPermissionDelayTime())},t.prototype.isPermission=function(t,e){var n=t+"_"+e;return""==e&&(n=t),this.cookieStore.in_array(n,this.permissions)},t.prototype.showPinyin=function(){var t=this,e=this.formModel.value.department_name;""!=e.trim()&&this.http.get(this.globalService.getDomain()+"/api/v1/getPinyin?name="+e).map(function(t){return t.json()}).subscribe(function(e){t.formModel.patchValue({department_shortcode:e.result})})},t.prototype.getDepartmentList=function(t,e){var n=this,r=this.globalService.getDomain()+"/api/v1/getDepartmentList?page="+t+"&sid="+this.cookieStore.getCookie("sid");if(""!=this.keyword.trim()&&(r+="&keyword="+this.keyword.trim()),0!=e)r+="&department_ids="+e;else{var a="";this.select_department_ids.forEach(function(t,e,n){1==t&&(a+=e+",")}),r+="&department_ids="+a}this.http.get(r).map(function(t){return t.json()}).subscribe(function(t){if(n.departmentList=t,console.log(n.departmentList),202==n.departmentList.status&&(n.cookieStore.removeAll(n.rollback_url),n.router.navigate(["/auth/login"])),n.departmentList){if(n.departmentList.result.departmentList.current_page==n.departmentList.result.departmentList.last_page?n.next=!0:n.next=!1,1==n.departmentList.result.departmentList.current_page?n.prev=!0:n.prev=!1,n.selects=[],n.departmentList.result.departmentList.length>0)for(var e=0,r=n.departmentList.result.departmentList.data;e<r.length;e++){var a=r[e];n.selects[a.department_id]=!1}n.check=!1}})},t.prototype.pagination=function(t){this.page=t,this.getDepartmentList(this.page,0)},t.prototype.changeCheckAll=function(t){var e=this,n=t.target.checked;this.selects.forEach(function(t,r,a){e.selects[r]=n}),this.check=n},t.prototype.handle=function(t){var e=t.target,n=e.value,r=e.checked;this.selects[n]=r;for(var a=0,s=0,i=this.selects;s<i.length;s++){0==i[s]&&(a+=1)}this.check=!(a>=1),this.editStatusDepartmentId=0,this.isStatus=0},t.prototype.getDepartmentDefault=function(){var t=this;this.http.get(this.globalService.getDomain()+"/api/v1/getDepartmentDefault?sid="+this.cookieStore.getCookie("sid")).map(function(t){return t.json()}).subscribe(function(e){t.departmentDefault=e,202==t.departmentDefault.status&&(alert(t.departmentDefault.msg),t.cookieStore.removeAll(t.rollback_url),t.router.navigate(["/auth/login"])),t.select_department_ids[0]=!0,t.departmentDefault.result.departmentList.forEach(function(e,n,r){t.select_department_ids[e.department_id]=!0,e.child_count>=1&&e.child.forEach(function(e,n,r){t.select_department_ids[e.department_id]=!0})});var n="";t.select_department_ids.forEach(function(t,e,r){1==t&&(n+=e+",")}),t.getDepartmentList("1",n)})},t.prototype.detailDepartment=function(t,e){var n=this;if(0==this.isStatus&&"add"!=t)return!1;"edit"==t?this.lgModal.show():"add"==t?(this.lgModal.show(),this.editStatusDepartmentId=0,this.isStatus=0):this.detailModal.show();var r=this.editStatusDepartmentId;0!=e&&(r=e),this.http.get(this.globalService.getDomain()+"/api/v1/getDepartmentInfo?department_id="+r+"&type="+t+"&sid="+this.cookieStore.getCookie("sid")).map(function(t){return t.json()}).subscribe(function(e){n.departmentInfo=e,200==n.departmentInfo.status&&"edit"==t?(n.formModel.patchValue({department_id:n.editStatusDepartmentId,department_name:n.departmentInfo.result.department_name,department_number:n.departmentInfo.result.department_number,department_shortcode:n.departmentInfo.result.department_shortcode,upper_department_id:n.departmentInfo.result.upper_department_id,department_attribute:n.departmentInfo.result.department_attribute,department_incharge:n.departmentInfo.result.department_incharge,department_phone:n.departmentInfo.result.department_phone,department_fax:n.departmentInfo.result.department_fax,department_remark:n.departmentInfo.result.department_remark,u_username:n.departmentInfo.result.u_username}),n.upper_department_id_default=n.departmentInfo.result.upper_department_id):202==n.departmentDefault.status&&(alert(n.departmentDefault.msg),n.cookieStore.removeAll(n.rollback_url),n.router.navigate(["/auth/login"]))})},t.prototype.closeSubmit=function(){this.formModel.patchValue({department_id:0,department_name:"",department_number:"",department_shortcode:"",upper_department_id:"0",department_attribute:"",department_incharge:"0",department_phone:"",department_fax:"",department_remark:"",u_username:""})},t.prototype.deleteDepartment=function(t){var e=this;if(0==this.isStatus&&"id"==t)return!1;if(this.globalService.demoAlert("",""))return!1;var n="",r="";if("id"==t)r=this.editStatusDepartmentId;else if("all"==t){var a=0;if(this.selects.forEach(function(t,e,n){1==t&&(r+=e+",",a+=1)}),a<1)return n="\u8bf7\u786e\u8ba4\u5df2\u9009\u4e2d\u9700\u8981\u5220\u9664\u7684\u4fe1\u606f\uff01",alert(n),!1}if(n="\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u4fe1\u606f\u5417\uff1f",confirm(n)){var s="";this.select_department_ids.forEach(function(t,e,n){1==t&&(s+=e+",")});var i=this.globalService.getDomain()+"/api/v1/deleteDepartmentById?department_id="+r+"&department_ids="+s+"&type="+t+"&sid="+this.cookieStore.getCookie("sid");""!=this.keyword.trim()&&(i+="&keyword="+this.keyword.trim()),this.http.delete(i).map(function(t){return t.json()}).subscribe(function(t){if(e.departmentList=t,202==e.departmentList.status&&(e.cookieStore.removeAll(e.rollback_url),e.router.navigate(["/auth/login"])),e.departmentList){e.departmentList.result.departmentList.current_page==e.departmentList.result.departmentList.last_page?e.next=!0:e.next=!1,1==e.departmentList.result.departmentList.current_page?e.prev=!0:e.prev=!1,e.selects=[];for(var n=0,r=e.departmentList.result.departmentList.data;n<r.length;n++){var a=r[n];e.selects[a.department_id]=!1}e.check=!1,e.getDepartmentDefault()}})}},t.prototype.onSubmit=function(t){var e=this;if(""==this.formModel.value.department_name.trim())return alert("\u8bf7\u586b\u5199\u90e8\u95e8\u540d\u79f0\uff01"),!1;var n="";this.select_department_ids.forEach(function(t,e,r){1==t&&(n+=e+",")}),this.http.post(this.globalService.getDomain()+"/api/v1/addDepartment",{department_id:this.formModel.value.department_id,department_name:this.formModel.value.department_name,department_number:this.formModel.value.department_number,department_shortcode:this.formModel.value.department_shortcode,upper_department_id:this.formModel.value.upper_department_id,department_attribute:this.formModel.value.department_attribute,department_incharge:this.formModel.value.department_incharge,department_phone:this.formModel.value.department_phone,department_fax:this.formModel.value.department_fax,department_remark:this.formModel.value.department_remark,department_status:this.formModel.value.department_id?0:1,keyword:this.keyword,department_ids:n,u_id:this.cookieStore.getCookie("uid"),sid:this.cookieStore.getCookie("sid")}).subscribe(function(n){var r=JSON.parse(n._body);if(alert(r.msg),200==r.status){if(e.departmentList=r,1==t&&e.lgModal.hide(),e.departmentList&&e.departmentList.result.departmentList.length>0){e.departmentList.result.departmentList.current_page==e.departmentList.result.departmentList.last_page?e.next=!0:e.next=!1,1==e.departmentList.result.departmentList.current_page?e.prev=!0:e.prev=!1,e.selects=[];for(var a=0,s=e.departmentList.result.departmentList.data;a<s.length;a++){var i=s[a];e.selects[i.department_id]=!1}e.check=!1}e.getDepartmentDefault(),e.closeSubmit()}else 202==r.status&&(e.cookieStore.removeAll(e.rollback_url),e.router.navigate(["/auth/login"]))})},t.prototype.selectDepartmentAll=function(){var t=this;1==this.select_department_ids[0]?(this.select_department_ids[0]=!1,this.departmentDefault.result.departmentList.forEach(function(e,n,r){t.select_department_ids[e.department_id]=!1,e.has_child>=1&&e.child.forEach(function(e,n,r){t.select_department_ids[e.department_id]=!1})})):(this.select_department_ids[0]=!0,this.departmentDefault.result.departmentList.forEach(function(e,n,r){t.select_department_ids[e.department_id]=!0,e.has_child>=1&&e.child.forEach(function(e,n,r){t.select_department_ids[e.department_id]=!0})}));var e="";this.select_department_ids.forEach(function(t,n,r){1==t&&(e+=n+",")}),this.getDepartmentList("1",e)},t.prototype.selectDepartment=function(t,e,n,r){var a=this;if(1==r)1==this.select_department_ids[t]?(this.departmentDefault.result.departmentList[e]&&this.departmentDefault.result.departmentList[e].child_count>=1&&this.departmentDefault.result.departmentList[e].child.forEach(function(t,e,n){a.select_department_ids[t.department_id]=!1}),this.select_department_ids[t]=!1):(this.select_department_ids[t]=!0,this.departmentDefault.result.departmentList[e]&&(console.log(this.departmentDefault.result.departmentList[e].child_count),this.departmentDefault.result.departmentList[e].child_count>=1&&this.departmentDefault.result.departmentList[e].child.forEach(function(t,e,n){console.log(t.department_id),a.select_department_ids[t.department_id]=!0})));else if(1!=r){if(1==this.select_department_ids[t])this.select_department_ids[r]=!1,this.select_department_ids[t]=!1;else{this.select_department_ids[t]=!0;var s=0;this.departmentDefault.result.departmentList[e]&&this.departmentDefault.result.departmentList[e].child_count>=1&&this.departmentDefault.result.departmentList[e].child.forEach(function(t,e,n){(0==a.select_department_ids[t.department_id]||Object(p.isUndefined)(a.select_department_ids[t.department_id]))&&s++}),0==s&&(this.select_department_ids[r]=!0)}console.log(this.select_department_ids)}var i="";this.select_department_ids.forEach(function(t,e,n){1==t&&(i+=e+",")}),this.leftIsAll(),this.editStatusDepartmentId=0,this.isStatus=0,this.getDepartmentList("1",i)},t.prototype.leftIsAll=function(){var t=this,e=0;this.departmentDefault.result.departmentList.forEach(function(n,r,a){0==t.select_department_ids[n.department_id]&&e++}),this.select_department_ids[0]=0==e},t.prototype.isStatusShow=function(t,e){var n=this;this.editStatusDepartmentId=t,this.isStatus=e,this.isAll=0,this.width="0%",this.width_1="70%",this.selects.forEach(function(t,e,r){1==t&&(n.selects[e]=!1)})},t.prototype.editStatus=function(t,e){var n=this,r="";"all"==e?this.selects.forEach(function(t,e,n){1==t&&(r+=e+",")}):r=this.editStatusDepartmentId;var a="";this.select_department_ids.forEach(function(t,e,n){1==t&&(a+=e+",")}),this.http.post(this.globalService.getDomain()+"/api/v1/addDepartment",{department_id:r,department_status:t,type:e,keyword:this.keyword.trim(),department_ids:a,sid:this.cookieStore.getCookie("sid")}).subscribe(function(t){var e=JSON.parse(t._body);if(alert(e.msg),200==e.status){if(n.departmentList=e,n.departmentList){n.departmentList.result.departmentList.current_page==n.departmentList.result.departmentList.last_page?n.next=!0:n.next=!1,1==n.departmentList.result.departmentList.current_page?n.prev=!0:n.prev=!1,n.selects=[];for(var r=0,a=n.departmentList.result.departmentList.data;r<a.length;r++){var s=a[r];n.selects[s.department_id]=!1}n.check=!1}}else 202==e.status&&(n.cookieStore.removeAll(n.rollback_url),n.router.navigate(["/auth/login"]));n.editStatusDepartmentId=0,n.isStatus=0})},t.prototype.showAllCheck=function(){0==this.isAll&&(this.isAll=1,this.editStatusDepartmentId=0,this.isStatus=0,this.width="10%",this.width_1="60%")},t.prototype.showLeftUl=function(t){this.showUl=t},t.prototype.showLeftUlChild=function(t){this.showUlChild=t},m([Object(r.ViewChild)("lgModal"),u("design:type",c.d)],t.prototype,"lgModal",void 0),m([Object(r.ViewChild)("detailModal"),u("design:type",c.d)],t.prototype,"detailModal",void 0),t=m([Object(r.Component)({selector:"app-setting-departmentnew",template:n("0WNG")}),u("design:paramtypes",[o.a,d.b,s.c,l.a,i.a])],t)}(),f=[{path:"",component:h}],b=s.d.forChild(f),_=n("JOm+"),g=n("pvSQ"),v=n("jfyD");n.d(e,"SettingDepartmentnewModule",function(){return w});var k=this&&this.__decorate||function(t,e,n,r){var a,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(i=(s<3?a(i):s>3?a(e,n,i):a(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},w=function(){function t(){}return t=k([Object(r.NgModule)({imports:[a.CommonModule,_.a,g.a,o.b,o.f,b],declarations:[h],providers:[v.CookieService,l.a]})],t)}()}});