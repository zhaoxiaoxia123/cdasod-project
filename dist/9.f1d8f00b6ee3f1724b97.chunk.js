webpackJsonp([9],{EUMx:function(e,t){e.exports='<div id="content">\r\n  <sa-widgets-grid>\r\n    <div class="row">\r\n      <article class="col-sm-12 ">\r\n        <sa-widget [editbutton]="false" [deletebutton]="false" >\r\n          <header >\r\n            <span class="widget-icon"> <i class="fa fa-edit"></i> </span>\r\n            <h2 >\u5916\u51fa</h2>\r\n          </header>\r\n          <div>\r\n            \x3c!--\u5c0f\u90e8\u4ef6\u5185\u5bb9--\x3e\r\n            <div class="widget-body no-padding">\r\n              <form id="smart-form-register" class="smart-form" >\r\n                <fieldset>\r\n                  <legend>\u57fa\u672c\u4fe1\u606f</legend>\r\n                  <div class="form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 ">\r\n                    <section >\r\n                      <label class="label txt-color-blue">\u5f00\u59cb\u65e5\u671f<span class="asterisk-color">*</span></label>\r\n                      <label  class="input">\r\n                        <input name="approval_start_date" [ngModelOptions]="{standalone: true}" [(ngModel)]="approval_start_date" value="{{approval_start_date}}" [dpDayPicker]="datePickerConfig" [theme]="\'dp-material\'" [mode]="\'day\'" placeholder="\u9009\u62e9\u65e5\u671f"  class="form-control ng-binding expire-text-soon"/>\r\n                      </label>\r\n                    </section>\r\n                  </div>\r\n                  <div class="form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 ">\r\n                    <section >\r\n                      <label class="label txt-color-blue">\u7ed3\u675f\u65e5\u671f<span class="asterisk-color">*</span></label>\r\n                      <label  class="input">\r\n                        <input  name="approval_end_date" [ngModelOptions]="{standalone: true}" [(ngModel)]="approval_end_date" value="{{approval_end_date}}" [dpDayPicker]="datePickerConfig" [theme]="\'dp-material\'" [mode]="\'day\'" placeholder="\u9009\u62e9\u65e5\u671f"  class="form-control ng-binding expire-text-soon"/>\r\n                      </label>\r\n                    </section>\r\n                  </div>\r\n\r\n                  <div class="form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 ">\r\n                    <section>\r\n                      <label class="label txt-color-blue">\u5916\u51fa\u65f6\u95f4\uff08\u5c0f\u65f6\uff09<span class="asterisk-color">*</span></label>\r\n                      <label class="input">\r\n                        <input  type="number" placeholder="\u8bf7\u8f93\u5165\u5916\u51fa\u65f6\u95f4\uff08\u5fc5\u586b\uff09" name="day" [(ngModel)]="day">\r\n                      </label>\r\n                    </section>\r\n                  </div>\r\n\r\n                  <div class="form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 ">\r\n                    <section>\r\n                      <label class="label txt-color-blue">\u5916\u51fa\u4e8b\u7531<span class="asterisk-color">*</span></label>\r\n                      <label class="textarea textarea-resizable">\r\n                        <textarea class="custom-scroll" rows="4" name="reason" [(ngModel)]="reason" placeholder="\u8bf7\u8f93\u5165\u5916\u51fa\u4e8b\u7531\uff08\u5fc5\u586b\uff09"></textarea>\r\n                      </label>\r\n                    </section>\r\n                  </div>\r\n\r\n                  <div class="form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 ">\r\n                    <div class="label ">\u56fe\u7247<a class="txt-color-blue pd-10" (click)="showSelectFileDiv()">\u6dfb\u52a0\u56fe\u7247</a><span class="txt-color-blueLight pd-10">(\u6700\u591a\u53ef\u4ee5\u9009\u62e910\u5f20)</span></div>\r\n                    <div  class="picture mb-20">\r\n                      <div  class="picture-list" *ngFor="let img of imgList;let ind = index;">\r\n                        <a  class="fa fa-times-circle picture-a" style="display:block;" (click)="removeImg(ind)"></a>\r\n                        <img width="90px" height="90px" src="{{url}}{{img}}" (click)="showBigPic(url+img)">\r\n                      </div>\r\n                    </div>\r\n\r\n                  </div>\r\n                  <div class="form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-20">\r\n                    <div class="label ">\u9644\u4ef6<a class="txt-color-blue pd-10" >\u6dfb\u52a0\u9644\u4ef6</a></div>\r\n                  </div>\r\n\r\n                  <div class="form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-20">\r\n                    <div class="label ">\u5ba1\u6279\u4eba<a class="txt-color-blue pd-10" (click)="showDetail(\'assign\')">\u6dfb\u52a0\u5ba1\u6279\u4eba</a></div>\r\n                    <ul  class="avatars" *ngIf="approve_user">\r\n                      <li *ngFor="let su of approve_user;let ind = index;">\r\n                        <a class="fa fa-times-circle picture-a" style="display:block;" (click)="removeUser(su.id,\'assign\')"></a>\r\n                        <a class="portrait-size" title="{{su.u_username}}">\r\n                          {{su.u_username}}\r\n                        </a>\r\n                        <div class="approval-arrow" *ngIf="ind < approve_user.length && ind != 0" >\r\n                          <img src="assets/img/icon/arrow.png" >\r\n                        </div>\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                  <div class="form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-20">\r\n                    <div class="label ">\u6284\u9001\u4eba<a class="txt-color-blue pd-10" (click)="showDetail(\'follower\')">\u6dfb\u52a0\u6284\u9001\u4eba</a><span class="txt-color-blueLight pd-10">(\u5ba1\u6279\u901a\u8fc7\u540e\uff0c\u901a\u77e5\u6284\u9001\u4eba)</span></div>\r\n                    <ul  class="avatars" *ngIf="follower_user">\r\n                      <li *ngFor="let su1 of follower_user;let ind1 = index;">\r\n                        <a class="fa fa-times-circle picture-a" style="display:block;" (click)="removeUser(su1.id,\'follower\')"></a>\r\n                        <a class="portrait-size" title="{{su1.u_username}}">\r\n                          {{su1.u_username}}\r\n                        </a>\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                </fieldset>\r\n                <footer>\r\n                  <button type="button" class="btn btn-default" >\r\n                    \u8fd4\u56de\r\n                  </button>\r\n                  <button class="btn btn-success" type="button" (click)="onSubmit(2)">\u63d0\u4ea4\u5e76\u65b0\u589e</button>\r\n                  <button  type="submit" class="btn btn-primary" (click)="onSubmit(1)">\r\n                    \u63d0\u4ea4\r\n                  </button>\r\n                </footer>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </sa-widget>\r\n      </article>\r\n    </div>\r\n  </sa-widgets-grid>\r\n</div>\r\n\r\n\x3c!--\u9009\u62e9\u5ba1\u6279\u4eba\u548c\u6284\u9001\u4eba--\x3e\r\n<app-select-user (approve_users)="getData($event)" [is_show_detail]="is_show_detail" (is_show_details)="getShowStatus($event)" [approval_or_copy]="approval_or_copy" *ngIf="is_show_detail"></app-select-user>\r\n\x3c!--\u9009\u4e0d\u7528\u88c1\u526a\u7684\u56fe\u7247--\x3e\r\n<app-select-file [select_type]="select_type" [imgList]="imgList" (select_types)="getSelectTypes()" (imgLists)="getImgLists($event)"></app-select-file>\r\n\x3c!--\u67e5\u770b\u5927\u56fe--\x3e\r\n<app-big-pic [select_type]="select_type" [show_big_pic]="show_big_pic" (select_types)="getSelectTypes()"></app-big-pic>\r\n'},Zem6:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("WT6e"),o=r("Xjw4"),i=r("bfOx"),a=r("R12H"),l=r("ntJC"),n=r("NOoU"),c=this&&this.__decorate||function(e,t,r,s){var o,i=arguments.length,a=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,r,s){this.http=e,this.router=t,this.cookieStore=r,this.globalService=s,this.datePickerConfig={locale:"zh-CN",format:"YYYY-MM-DD",enableMonthSelector:!0,showMultipleYearsNavigation:!0},this.approve_users=[],this.approve_user=[],this.follower_user=[],this.remove_user_ids=[],this.approval_or_copy="",this.is_show_detail="",this.is_show_details="",this.select_type="",this.show_big_pic="",this.imgList=[],this.approval_start_date="",this.approval_end_date="",this.day="",this.reason="",this.uid=0,this.cid=0,this.type=3,this.domain_url="",this.url=this.globalService.getDomain(),this.rollback_url="",this.permissions=[],this.uid=this.cookieStore.getCookie("uid"),this.cid=this.cookieStore.getCookie("cid"),this.domain_url=this.globalService.getDomain()}return e.prototype.ngOnInit=function(){var e=this;this.globalService.getMenuInfo(),setTimeout(function(){e.menu_id=e.globalService.getMenuId(),e.rollback_url=e.globalService.getMenuUrl(),e.permissions=e.globalService.getPermissions()},this.globalService.getMenuPermissionDelayTime())},e.prototype.isPermission=function(e,t){var r=e+"_"+t;return""==t&&(r=e),this.cookieStore.in_array(r,this.permissions)},e.prototype.onSubmit=function(e){var t=this;if(""==this.approval_start_date.trim())return alert("\u8bf7\u586b\u5199\u5f00\u59cb\u65e5\u671f\uff01"),!1;if(""==this.approval_end_date.trim())return alert("\u8bf7\u586b\u5199\u7ed3\u675f\u65e5\u671f\uff01"),!1;var r=[];this.approve_user.forEach(function(e,t,s){r.push(e.id)});var s=[];this.follower_user.forEach(function(e,t,r){s.push(e.id)}),this.http.post(this.globalService.getDomain()+"/api/v1/addApproval",{approval_start_date:this.approval_start_date,approval_end_date:this.approval_end_date,day:this.day,reason:this.reason,approval_img:JSON.stringify(this.imgList),approval_assign:JSON.stringify(r),approval_copy_person:JSON.stringify(s),approval_type:this.type,u_id:this.cookieStore.getCookie("uid"),sid:this.cookieStore.getCookie("sid")}).subscribe(function(r){var s=JSON.parse(r._body);alert(s.msg),200==s.status?1==e?t.router.navigate(["/process/approval-process/0"]):t.clear_():202==s.status&&(t.cookieStore.removeAll(t.rollback_url),t.router.navigate(["/auth/login"]))})},e.prototype.clear_=function(){this.approval_start_date="",this.approval_end_date="",this.day="",this.reason="",this.approve_users=[],this.approve_user=[],this.follower_user=[],this.imgList=[]},e.prototype.showSelectFileDiv=function(){this.select_type="file"},e.prototype.getSelectTypes=function(){this.select_type=""},e.prototype.getImgLists=function(e){this.imgList=JSON.parse(e)},e.prototype.showBigPic=function(e){this.select_type="bigPic",this.show_big_pic=e},e.prototype.showDetail=function(e){var t=this;this.approval_or_copy=e,setTimeout(function(){t.is_show_detail="1"},500)},e.prototype.getData=function(e){"assign"==this.approval_or_copy?this.approve_user=JSON.parse(e):"follower"==this.approval_or_copy&&(this.follower_user=JSON.parse(e))},e.prototype.getShowStatus=function(e){this.is_show_detail=e},e.prototype.removeUser=function(e,t){this.remove_user_ids.push(e);var r=[];"assign"==t?(this.approve_user.forEach(function(t,s,o){t.id!=e&&r.push(t)}),this.approve_user=r):"follower"==t&&(this.follower_user.forEach(function(t,s,o){t.id!=e&&r.push(t)}),this.follower_user=r)},e=c([Object(s.Component)({selector:"app-initiate-goout",template:r("EUMx"),encapsulation:s.ViewEncapsulation.None,styles:[r("lwjs")]}),p("design:paramtypes",[n.b,i.c,l.a,a.a])],e)}(),u=[{path:"",component:d}],h=i.d.forChild(u),g=r("pvSQ"),f=r("JOm+"),_=r("jfyD"),v=r("SSMX"),m=r("1pPv"),b=r("50Tv"),y=r("VPG1");r.d(t,"InitiateGooutModule",function(){return w});var x=this&&this.__decorate||function(e,t,r,s){var o,i=arguments.length,a=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},w=function(){function e(){}return e=x([Object(s.NgModule)({imports:[o.CommonModule,g.a,f.a,h,v.a,b.a,y.a,m.a],declarations:[d],providers:[_.CookieService,l.a]})],e)}()},lwjs:function(e,t){e.exports='@charset "UTF-8";\n/**\r\n\u4e0a\u4f20\u56fe\u7247\r\n */\n/*\u56fe\u7247\u4e0a\u4f20\u6309\u94ae*/\n.c-file-upload {\n  display: block;\n  overflow: hidden;\n  position: relative; }\n.c-file-upload [type=file] {\n    cursor: pointer;\n    display: block;\n    filter: alpha(opacity=0);\n    min-height: 100%;\n    min-width: 100%;\n    opacity: 0;\n    position: absolute;\n    right: 0;\n    text-align: right;\n    top: 0; }\n/*\u767d\u8272*/\n/*\u5185\u5bb9*/\n.c-content-inner {\n  background-color: #ffffff;\n  border: 0px;\n  border-radius: 1px;\n  -webkit-box-shadow: 1px 2px 6px rgba(0, 0, 0, 0.03);\n  box-shadow: 1px 2px 6px rgba(0, 0, 0, 0.03);\n  -moz-box-shadow: 1px 2px 6px rgba(0, 0, 0, 0.03);\n  padding: 15px; }\n.c-mt15 {\n  margin-top: 15px; }\n'}});