webpackJsonp([58],{"D/ib":function(t,e){t.exports='<div id="content">\r\n  <sa-widgets-grid>\r\n    <div class="row">\r\n      <article class="col-sm-12 ">\r\n        <sa-widget [editbutton]="false" [deletebutton]="false" [colorbutton]="false">\r\n          <header>\r\n            <span class="widget-icon"> <i class="fa {{menuInfos?.menu_icon}}"></i> </span>\r\n            <h2>{{menuInfos?.menu_name}}</h2>\r\n          </header>\r\n          <div>\r\n            <div class="widget-body no-padding" >\r\n              <div  class="row">\r\n                <article  class="col-sm-12">\r\n                  <div class="navbar navbar-default">\r\n                    <form  class="navbar-form navbar-left ng-pristine ng-valid ng-touched" novalidate="" role="search" >\r\n                      <div class="form-group pdlr-4">\r\n                        <a class="btn btn-success btn-sm" (click)="refreshPage()">\r\n                          <span class="fa fa-refresh  mr-5"></span>\u5237\u65b0</a>\r\n                      </div>\r\n                      <div class="form-group pdlr-4">\r\n                        <a [ngClass]="{\'btn default-btn btn-sm\':true,\'not-click\':editStatusOpeningInventoryId == 0}" (click)="showDetail(\'detail\')">\r\n                          <span class="glyphicon glyphicon-zoom-in mr-5 color-green"></span>\u8be6\u60c5</a>\r\n                      </div>\r\n                    </form>\r\n                    <form  class="navbar-form navbar-left ng-pristine ng-valid ng-touched" novalidate="" role="search" >\r\n                      <div class="form-group pdlr-4">\r\n                       <strong> \u7b5b\u9009\uff1a</strong>\r\n                      </div>\r\n                      <div class="form-group btn-group pdlr-4">\r\n                        <a class="btn default-btn btn-sm dropdown-toggle" data-toggle="dropdown">\r\n                          {{property_title}}<i class="fa fa-fw fa-chevron-down"></i></a>\r\n                        <ul class="dropdown-menu" role="menu">\r\n                          <li (click)="setProperty(\'\',\'\u5168\u90e8\')"><a >\u5168\u90e8</a></li>\r\n                          <li (click)="setProperty(\'1\',\'\u9500\u552e\')"><a>\u9500\u552e</a></li>\r\n                          <li (click)="setProperty(\'2\',\'\u5916\u8d2d\')"><a >\u5916\u8d2d</a></li>\r\n                        </ul>\r\n                      </div>\r\n                      <div class="form-group pdlr-4 smart-form">\r\n                        <section style="width: 80px;margin:0;">\r\n                          <label class="select" >\r\n                            <select name="search_storehouse_id" [(ngModel)]="search_storehouse_id" (change)="setStorehouse($event)">\r\n                              <option value="0">\u5168\u90e8</option>\r\n                              <option *ngFor="let sh of productDefault?.result?.storeHouseList" value="{{sh.storehouse_id}}" >{{sh.storehouse_name}}</option>\r\n                            </select> <i></i>\r\n                          </label>\r\n                        </section>\r\n                      </div>\r\n                      <div class="form-group pdlr-4">\r\n                        <input  class="form-control ng-pristine ng-valid ng-touched" maxlength="15" [(ngModel)]="keyword" name="keyword" placeholder="\u8bf7\u8f93\u5165\u641c\u7d22\u5185\u5bb9" type="text">\r\n                      </div>\r\n                      <div class="form-group pdlr-4">\r\n                        <button class="btn btn-default" type="button" (click)="searchOpeninventory(1)">\r\n                          <i  class="glyphicon glyphicon-search"></i>\r\n                          \u641c\u7d22\r\n                        </button>\r\n                      </div>\r\n                    </form>\r\n                  </div>\r\n                </article>\r\n              </div>\r\n\r\n\r\n              <div class="pt">\r\n                <article class="form-group col col-xs-4">\r\n                  <sa-widget class="jarviswidget well" [colorbutton]="false" [editbutton]="false" [togglebutton]="false"\r\n                             [deletebutton]="false" [fullscreenbutton]="false" [custombutton]="false" [sortable]="false">\r\n                    <div>\r\n                      <div class="widget-body no-padding">\r\n                        <alert type="info" class="no-margin">\r\n                          <i class="fa-fw fa fa-sitemap"></i>\r\n                          \u5546\u54c1\u5206\u7c7b\r\n                        </alert>\r\n                        <div class="pd-10 mt-10 height-overflow">\r\n                          <div class="widget-body">\r\n                            <div class="tree smart-form">\r\n                              <ul class="">\r\n                                <li class=" parent_li">\r\n                                <span>\r\n                                  <label class="checkbox inline-block tree-label pt-12 ">\r\n                                    <input type="checkbox" name="checkbox-inline" [checked]="select_category_ids[0]" (click)="selectCategoryAll()"><i></i>\r\n                                  </label>\r\n                                  <i class="fa fa-lg fa-folder-open"></i>\u5168\u90e8\r\n                                  <i class="sa-icon fa fa-lg fa-plus-circle" *ngIf="showUl == 0" (click)="showLeftUl(1)"></i>\r\n                                  <i class="sa-icon fa fa-lg fa-minus-circle" *ngIf="showUl == 1" (click)="showLeftUl(0)"></i>\r\n                                </span>\r\n                                  <ul class="" *ngIf="showUl == 1">\r\n                                    <li class=" parent_li" *ngFor="let c of productDefault?.result?.categoryList;let ind = index;">\r\n                                    <span>\r\n                                      <label class="checkbox inline-block tree-label ">\r\n                                        <input type="checkbox" name="checkbox-inline" [checked]="select_category_ids[c.category_id]" (click)="selectCategory(c.category_id,ind,0,1)">\r\n                                        <i></i>{{c.category_desc}}\r\n                                        <em class="txt-color-blue">({{c.child_count}})</em>\r\n                                      </label>\r\n                                      <i class="sa-icon fa fa-lg fa-minus-circle" *ngIf="showUlChild == c.category_id && c.has_child != 0" (click)="showLeftUlChild(0)"></i>\r\n                                      <i class="sa-icon fa fa-lg fa-plus-circle" *ngIf="showUlChild != c.category_id && c.has_child != 0" (click)="showLeftUlChild(c.category_id)"></i>\r\n                                    </span>\r\n                                      <ul class="" *ngIf="showUlChild == c.category_id">\r\n                                        <li *ngFor="let dc of c.child;let indChild = index;">\r\n                                        <span>\r\n                                          <label class="checkbox inline-block tree-label">\r\n                                            <input type="checkbox" name="checkbox-inline" [checked]="select_category_ids[c.category_id] || select_category_ids[dc.category_id]" (click)="selectCategory(dc.category_id,ind,indChild,c.category_id)">\r\n                                            <i></i>{{dc.category_desc}}\r\n                                            <em class="txt-color-blue">({{c.child_count}})</em>\r\n                                          </label>\r\n                                        </span>\r\n                                        </li>\r\n                                      </ul>\r\n                                    </li>\r\n                                  </ul>\r\n                                </li>\r\n                              </ul>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div class="dt-toolbar">\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </sa-widget>\r\n                </article>\r\n                <article class="form-group col col-xs-8">\r\n                  <sa-widget class="jarviswidget well" [colorbutton]="false" [editbutton]="false" [togglebutton]="false"\r\n                             [deletebutton]="false" [fullscreenbutton]="false" [custombutton]="false" [sortable]="false">\r\n                    <div>\r\n                      <div class="widget-body no-padding">\r\n                        <alert type="info" class="no-margin" >\r\n                          <i class="fa-fw fa fa-table"></i>\r\n                          \u5e93\u5b58\u91cf\u5217\u8868\r\n                        </alert>\r\n                        <div class="mt-10 height-overflow" style="padding:0;">\r\n                          <div style="padding: 0;z-index: 2;" class="table-responsive">\r\n                            <table class="table table-striped  smart-form">\r\n                              <thead>\r\n                              <tr >\r\n                                <th>\u5546\u54c1\u7f16\u53f7</th>\r\n                                <th>\u5546\u54c1\u540d\u79f0</th>\r\n                                <th>\u4ed3\u5e93\u540d\u79f0</th>\r\n                                <th>\u603b\u5e93\u5b58\u91cf</th>\r\n                                <th>\u5269\u4f59\u5e93\u5b58\u91cf</th>\r\n                                <th>\u5546\u54c1\u5206\u7c7b</th>\r\n                                <th>\u5546\u54c1\u5c5e\u6027</th>\r\n                                <th>\u89c4\u683c\u578b\u53f7</th>\r\n                                <th>\u5355\u4f4d</th>\r\n                                <th>\u751f\u4ea7\u5382\u5bb6</th>\r\n                                <th>\u72b6\u6001</th>\r\n                              </tr>\r\n                              </thead>\r\n                              <tbody>\r\n                              <tr *ngFor="let p of searchProductList?.result?.productList?.data" (click)="isStatusShow(p.openinginventory_id,p.openinginventory_status)" [ngClass]="{\'table-color\':editStatusOpeningInventoryId == p.openinginventory_id}">\r\n                                <td>{{p.p_product_id}}</td>\r\n                                <td>{{p.p_name}}</td>\r\n                                <td>{{p.storehouse_name}}</td>\r\n                                <td>{{p.openinginventory_count}}</td>\r\n                                <td>{{p.openinginventory_surplus_count}}</td>\r\n                                <td>{{p.category}}</td>\r\n                                <td>{{p.p_property==1?\'\u9500\u552e\':\'\u5916\u8d2d\'}}</td>\r\n                                <td>{{p.p_specification}}</td>\r\n                                <td>{{p.p_unit}}</td>\r\n                                <td>{{p.c_name}}</td>\r\n                                <td><span class="">{{p.openinginventory_status == 1?\'\u6b63\u5e38\':\'\u5df2\u5220\u9664\'}}</span></td>\r\n                              </tr>\r\n                              </tbody>\r\n                            </table>\r\n                          </div>\r\n                        </div>\r\n                        \x3c!-- \u5e95\u90e8-\uff08\u5206\u9875\u90e8\u5206\uff09--\x3e\r\n                        <div class="dt-toolbar">\r\n                          <div class="col-xs-12 col-sm-6">\r\n                            <span>\u5171{{ searchProductList?.result?.productList?.total}}\u6761</span>\r\n                          </div>\r\n                          <div class="hidden-xs right">\r\n                            <ul class="pagination pagination-sm" *ngIf="searchProductList?.result?.page">\r\n                              <li *ngFor="let p of searchProductList?.result?.page" class="{{p.class}}">\r\n                                <a (click)="pagination(p.value)" *ngIf="p.method==\'method\'">{{p.text}}</a>\r\n                                <a *ngIf="p.method==\'\'">{{p.text}}</a>\r\n                              </li>\r\n                            </ul>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </sa-widget>\r\n                  \x3c!-- end widget --\x3e\r\n                </article>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </sa-widget>\r\n      </article>\r\n    </div>\r\n  </sa-widgets-grid>\r\n</div>\r\n\r\n<div class="modal fade" bsModal #detailModal="bs-modal">\r\n  <div class="modal-dialog">\r\n    <div class="modal-content">\r\n      <div class="modal-header">\r\n        \x3c!-- \u5173\u95ed\u6309\u94ae --\x3e\r\n        <button type="button" class="close" (click)="clear_(\'detail\')">\r\n          \xd7\r\n        </button>\r\n        \x3c!-- \u6807\u9898 --\x3e\r\n        <h3 class="modal-title" data-ng-bind=\'results.title\'></h3>\r\n        <h4 class="modal-title">{{productInfo?.result?.p_name}}-{{productInfo?.result?.p_product_id}}</h4>\r\n      </div>\r\n      <div class="modal-body height-overflow-380">\r\n        <div class="row ">\r\n          <div class="col-sm-12">\r\n            <div class="" >\r\n              <P class="alert alert-info">\u57fa\u672c\u4fe1\u606f</P>\r\n              <table class="table table-striped table-forum">\r\n                <tbody>\r\n                <tr>\r\n                  <td class="width-120">\u5546\u54c1\u540d\u79f0:</td>\r\n                  <td class="">{{productInfo?.result?.p_name}}</td>\r\n                  <td class="width-120">\u5546\u54c1\u7f16\u7801:</td>\r\n                  <td >{{productInfo?.result?.p_product_id}}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td class="width-120">\u5546\u54c1\u578b\u53f7:</td>\r\n                  <td class="">{{productInfo?.result?.p_specification}}</td>\r\n                  <td class="width-120">\u4ed3\u5e93\u540d\u79f0:</td>\r\n                  <td >{{productInfo?.result?.storehouse_name}}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td class="width-120">\u5355\u4f4d:</td>\r\n                  <td class="">{{productInfo?.result?.p_unit}}</td>\r\n                  <td class="width-120">\u603b\u6570\u91cf:</td>\r\n                  <td >{{productInfo?.result?.openinginventory_count}}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td class="width-120">\u5269\u4f59\u5e93\u5b58\u91cf:</td>\r\n                  <td class="">{{productInfo?.result?.openinginventory_surplus_count}}</td>\r\n                  <td class="width-120">\u6761\u7801:</td>\r\n                  <td class="" colspan="3">{{productInfo?.result?.p_qrcode}}</td>\r\n                </tr>\r\n                </tbody>\r\n              </table>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="modal-footer">\r\n        <button type="button" class="btn btn-default" (click)="clear_(\'detail\')">\u8fd4\u56de</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n'},czB1:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("WT6e"),s=r("Xjw4"),i=r("bfOx"),o=r("NOoU"),c=r("ntJC"),l=r("R12H"),a=r("OMJi"),d=r("Exih"),u=this&&this.__decorate||function(t,e,r,n){var s,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(s=t[c])&&(o=(i<3?s(o):i>3?s(e,r,o):s(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o},h=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t,e,r,n){this.http=t,this.router=e,this.cookieStore=r,this.globalService=n,this.showUl=1,this.showUlChild=0,this.selects=[],this.selects_index=[],this.check=!1,this.prev=!1,this.next=!1,this.edit_p_id=0,this.storehouse_id=0,this.p_count=0,this.p_price=0,this.editStatusOpeningInventoryId=0,this.productInfo=[],this.keyword="",this.p_type=2,this.category_type_product=6,this.selectProductLists=[],this.searchProductList=[],this.productDefault=[],this.select_category_ids=[],this.property_title="\u5168\u90e8",this.p_property="",this.search_storehouse_id=0,this.rollback_url="",this.menuInfos=[],this.globalService.getMenuInfo(),this.getProductDefault()}return t.prototype.ngOnInit=function(){var t=this;this.globalService.getMenuInfo(),setTimeout(function(){t.rollback_url=t.globalService.getMenuUrl(),t.menuInfos=t.globalService.getMenuInfos()},this.globalService.getMenuPermissionDelayTime())},t.prototype.setProperty=function(t,e){this.p_property=t,this.property_title=e,this.searchOpeninventory("1")},t.prototype.setStorehouse=function(t){this.search_storehouse_id=t.target.value,this.searchOpeninventory("1")},t.prototype.getProductDefault=function(){var t=this;this.http.get(this.globalService.getDomain()+"/api/v1/getProductDefault?type=list&p_type="+this.p_type+"&category_type="+this.category_type_product+"&sid="+this.cookieStore.getCookie("sid")).map(function(t){return t.json()}).subscribe(function(e){t.productDefault=e,202==t.productDefault.status&&(alert(t.productDefault.msg),t.cookieStore.removeAll(t.rollback_url),t.router.navigate(["/auth/login"])),t.select_category_ids[0]=!0,t.productDefault.result.categoryList.forEach(function(e,r,n){t.select_category_ids[e.category_id]=!0,e.has_child>=1&&e.child.forEach(function(e,r,n){t.select_category_ids[e.category_id]=!0})}),t.searchOpeninventory("1")})},t.prototype.refreshPage=function(){this.property_title="\u5168\u90e8",this.p_property="",this.keyword="",this.search_storehouse_id=0,this.searchOpeninventory(1)},t.prototype.searchOpeninventory=function(t){var e=this;this.p_property||(this.p_property="");var r=this.globalService.getDomain()+"/api/v1/getStockProductList?page="+t+"&p_type="+this.p_type+"&type=list&p_property="+this.p_property+"&search_storehouse_id="+this.search_storehouse_id+"&sid="+this.cookieStore.getCookie("sid");""!=this.keyword.trim()&&(r+="&keyword="+this.keyword.trim());var n="";this.select_category_ids.forEach(function(t,e,r){1==t&&(n+=e+",")}),r+="&category_ids="+n,this.http.get(r).map(function(t){return t.json()}).subscribe(function(t){if(e.searchProductList=t,202==e.searchProductList.status&&(alert(e.searchProductList.msg),e.cookieStore.removeAll(e.rollback_url),e.router.navigate(["/auth/login"])),e.searchProductList&&e.searchProductList.result.productList.length>0){e.searchProductList.result.productList.current_page==e.searchProductList.result.productList.last_page?e.next=!0:e.next=!1,1==e.searchProductList.result.productList.current_page?e.prev=!0:e.prev=!1;for(var r=0,n=e.selectProductLists;r<n.length;r++){var s=n[r];e.selects[s.p_id]=!0}e.check=!1}})},t.prototype.pagination=function(t){this.searchOpeninventory(t)},t.prototype.selectCategoryAll=function(){var t=this;1==this.select_category_ids[0]?(this.select_category_ids[0]=!1,this.productDefault.result.categoryList.forEach(function(e,r,n){t.select_category_ids[e.category_id]=!1,e.has_child>=1&&e.child.forEach(function(e,r,n){t.select_category_ids[e.category_id]=!1})})):(this.select_category_ids[0]=!0,this.productDefault.result.categoryList.forEach(function(e,r,n){t.select_category_ids[e.category_id]=!0,e.has_child>=1&&e.child.forEach(function(e,r,n){t.select_category_ids[e.category_id]=!0})})),this.searchOpeninventory("1")},t.prototype.showLeftUl=function(t){this.showUl=t},t.prototype.showLeftUlChild=function(t){this.showUlChild=t},t.prototype.isStatusShow=function(t,e){console.log(e),1===e&&(this.editStatusOpeningInventoryId=t)},t.prototype.changeCheckAll=function(t){var e=this,r=t.target.checked,n=0;this.selects.forEach(function(t,s,i){e.selects[s]=r,e.selects_index[n]=1==r?s:s+"_",n++}),this.check=r},t.prototype.handle=function(t,e){var r=t.target,n=r.value,s=r.checked;this.selects[n]=s;for(var i=0,o=0,c=this.selects;o<c.length;o++){0==c[o]&&(i+=1)}this.selects_index[e]=1==s?n:n+"_",this.check=!(i>=1)},t.prototype.selectCategory=function(t,e,r,n){var s=this;if(1==n)1==this.select_category_ids[t]?(this.productDefault.result.categoryList[e]&&this.productDefault.result.categoryList[e].child_count>=1&&this.productDefault.result.categoryList[e].child.forEach(function(t,e,r){s.select_category_ids[t.category_id]=!1}),this.select_category_ids[t]=!1):(this.select_category_ids[t]=!0,this.productDefault.result.categoryList[e]&&this.productDefault.result.categoryList[e].child_count>=1&&this.productDefault.result.categoryList[e].child.forEach(function(t,e,r){s.select_category_ids[t.category_id]=!0}));else if(1!=n)if(1==this.select_category_ids[t])this.select_category_ids[n]=!1,this.select_category_ids[t]=!1;else{this.select_category_ids[t]=!0;var i=0;this.productDefault.result.categoryList[e]&&this.productDefault.result.categoryList[e].child_count>=1&&this.productDefault.result.categoryList[e].child.forEach(function(t,e,r){(0==s.select_category_ids[t.category_id]||Object(a.isUndefined)(s.select_category_ids[t.category_id]))&&i++}),0==i&&(this.select_category_ids[n]=!0)}this.searchOpeninventory("1")},t.prototype.showDetail=function(t){var e=this;if(0==this.editStatusOpeningInventoryId)return!1;this.http.get(this.globalService.getDomain()+"/api/v1/getOpeningInventoryInfo?openinginventory_id="+this.editStatusOpeningInventoryId+"&type=detail&sid="+this.cookieStore.getCookie("sid")).map(function(t){return t.json()}).subscribe(function(r){e.productInfo=r,200==e.productInfo.status?(e.setValue(e.productInfo),"detail"==t&&e.detailModal.show()):202==e.productInfo.status?(alert(e.productInfo.msg),e.cookieStore.removeAll(e.rollback_url),e.router.navigate(["/auth/login"])):alert(e.productInfo.msg)})},t.prototype.clear_=function(t){void 0===t&&(t=""),this.storehouse_id=0,this.edit_p_id=0,this.p_count=0,this.p_price=0,"detail"==t&&this.detailModal.hide()},t.prototype.setValue=function(t){this.edit_p_id=t.result.p_id,this.storehouse_id=t.result.storehouse_id,this.p_count=t.result.openinginventory_first_count,this.p_price=t.result.openinginventory_price},u([Object(n.ViewChild)("detailModal"),h("design:type",d.d)],t.prototype,"detailModal",void 0),t=u([Object(n.Component)({selector:"app-inventory-number",template:r("D/ib")}),h("design:paramtypes",[o.b,i.c,c.a,l.a])],t)}(),g=[{path:"",component:p}],f=i.d.forChild(g),_=r("pvSQ"),y=r("JOm+");r.d(e,"InventoryNumberModule",function(){return b});var v=this&&this.__decorate||function(t,e,r,n){var s,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(s=t[c])&&(o=(i<3?s(o):i>3?s(e,r,o):s(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o},b=function(){function t(){}return t=v([Object(n.NgModule)({imports:[s.CommonModule,_.a,y.a,f],declarations:[p]})],t)}()}});