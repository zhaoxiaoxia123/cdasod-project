{"code":"webpackJsonp([7],{\"J/oK\":function(e,t){e.exports='@charset \"UTF-8\";\\n/**\\r\\n\\u4e0a\\u4f20\\u56fe\\u7247\\r\\n */\\n/*\\u56fe\\u7247\\u4e0a\\u4f20\\u6309\\u94ae*/\\n.c-file-upload {\\n  display: block;\\n  overflow: hidden;\\n  position: relative; }\\n.c-file-upload [type=file] {\\n    cursor: pointer;\\n    display: block;\\n    filter: alpha(opacity=0);\\n    min-height: 100%;\\n    min-width: 100%;\\n    opacity: 0;\\n    position: absolute;\\n    right: 0;\\n    text-align: right;\\n    top: 0; }\\n/*\\u767d\\u8272*/\\n/*\\u5185\\u5bb9*/\\n.c-content-inner {\\n  background-color: #ffffff;\\n  border: 0px;\\n  border-radius: 1px;\\n  -webkit-box-shadow: 1px 2px 6px rgba(0, 0, 0, 0.03);\\n  box-shadow: 1px 2px 6px rgba(0, 0, 0, 0.03);\\n  -moz-box-shadow: 1px 2px 6px rgba(0, 0, 0, 0.03);\\n  padding: 15px; }\\n.c-mt15 {\\n  margin-top: 15px; }\\n'},So2t:function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var s=i(\"WT6e\"),o=i(\"Xjw4\"),r=i(\"bfOx\"),n=i(\"R12H\"),l=i(\"ntJC\"),a=i(\"NOoU\"),c=this&&this.__decorate||function(e,t,i,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(n=(r<3?o(n):r>3?o(t,i,n):o(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},p=this&&this.__metadata||function(e,t){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,i,s){this.http=e,this.router=t,this.cookieStore=i,this.globalService=s,this.datePickerConfig={locale:\"zh-CN\",format:\"YYYY-MM-DD\",enableMonthSelector:!0,showMultipleYearsNavigation:!0},this.requite_list=[],this.approve_users=[],this.approve_user=[],this.follower_user=[],this.remove_user_ids=[],this.approval_or_copy=\"\",this.is_show_detail=\"\",this.is_show_details=\"\",this.select_type=\"\",this.show_big_pic=\"\",this.imgList=[],this.prices=0,this.uid=0,this.cid=0,this.type=4,this.domain_url=\"\",this.url=this.globalService.getDomain(),this.rollback_url=\"\",this.permissions=[],this.uid=this.cookieStore.getCookie(\"uid\"),this.cid=this.cookieStore.getCookie(\"cid\"),this.domain_url=this.globalService.getDomain(),this.requite_list=[{price:\"\",type:\"\",reason:\"\"}]}return e.prototype.ngOnInit=function(){var e=this;this.globalService.getMenuInfo(),setTimeout(function(){e.menu_id=e.globalService.getMenuId(),e.rollback_url=e.globalService.getMenuUrl(),e.permissions=e.globalService.getPermissions()},this.globalService.getMenuPermissionDelayTime())},e.prototype.isPermission=function(e,t){var i=e+\"_\"+t;return\"\"==t&&(i=e),this.cookieStore.in_array(i,this.permissions)},e.prototype.joinRequite=function(){this.requite_list.push({price:\"\",type:\"\",reason:\"\"}),console.log(this.requite_list)},e.prototype.deleteRequite=function(e){this.requite_list.splice(e,1)},e.prototype.sumPCount=function(){var e=this;this.prices=0,this.requite_list.forEach(function(t,i,s){e.prices+=parseInt(t.price)})},e.prototype.onSubmit=function(e){var t=this;if(\"\"==this.requite_list[0].price)return alert(\"\\u8bf7\\u586b\\u5199\\u62a5\\u9500\\u91d1\\u989d\\uff01\"),!1;if(\"\"==this.requite_list[0].reason.trim())return alert(\"\\u8bf7\\u586b\\u5199\\u62a5\\u9500\\u4e8b\\u7531\\uff01\"),!1;var i=[];this.approve_user.forEach(function(e,t,s){i.push(e.id)});var s=[];this.follower_user.forEach(function(e,t,i){s.push(e.id)}),this.http.post(this.globalService.getDomain()+\"/api/v1/addApproval\",{total:this.prices,info:JSON.stringify(this.requite_list),approval_img:JSON.stringify(this.imgList),approval_assign:JSON.stringify(i),approval_copy_person:JSON.stringify(s),approval_type:this.type,u_id:this.cookieStore.getCookie(\"uid\"),sid:this.cookieStore.getCookie(\"sid\")}).subscribe(function(i){var s=JSON.parse(i._body);alert(s.msg),200==s.status?1==e?t.router.navigate([\"/process/approval-process/0\"]):t.clear_():202==s.status&&(t.cookieStore.removeAll(t.rollback_url),t.router.navigate([\"/auth/login\"]))})},e.prototype.clear_=function(){this.requite_list=[{price:\"\",type:\"\",reason:\"\"}],this.approve_users=[],this.approve_user=[],this.follower_user=[],this.imgList=[]},e.prototype.showSelectFileDiv=function(){this.select_type=\"file\"},e.prototype.getSelectTypes=function(){this.select_type=\"\"},e.prototype.getImgLists=function(e){this.imgList=JSON.parse(e)},e.prototype.showBigPic=function(e){this.select_type=\"bigPic\",this.show_big_pic=e},e.prototype.showDetail=function(e){var t=this;this.approval_or_copy=e,setTimeout(function(){t.is_show_detail=\"1\"},500)},e.prototype.getData=function(e){\"assign\"==this.approval_or_copy?this.approve_user=JSON.parse(e):\"follower\"==this.approval_or_copy&&(this.follower_user=JSON.parse(e))},e.prototype.getShowStatus=function(e){this.is_show_detail=e},e.prototype.removeUser=function(e,t){this.remove_user_ids.push(e);var i=[];\"assign\"==t?(this.approve_user.forEach(function(t,s,o){t.id!=e&&i.push(t)}),this.approve_user=i):\"follower\"==t&&(this.follower_user.forEach(function(t,s,o){t.id!=e&&i.push(t)}),this.follower_user=i)},e=c([Object(s.Component)({selector:\"app-initiate-requite\",template:i(\"aZzE\"),encapsulation:s.ViewEncapsulation.None,styles:[i(\"J/oK\")]}),p(\"design:paramtypes\",[a.b,r.c,l.a,n.a])],e)}(),d=[{path:\"\",component:u}],h=r.d.forChild(d),f=i(\"pvSQ\"),g=i(\"JOm+\"),m=i(\"jfyD\"),b=i(\"SSMX\"),v=i(\"50Tv\"),_=i(\"1pPv\"),y=i(\"VPG1\");i.d(t,\"InitiateRequiteModule\",function(){return w});var x=this&&this.__decorate||function(e,t,i,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(n=(r<3?o(n):r>3?o(t,i,n):o(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},w=function(){function e(){}return e=x([Object(s.NgModule)({imports:[o.CommonModule,f.a,g.a,h,b.a,v.a,y.a,_.a],declarations:[u],providers:[m.CookieService,l.a]})],e)}()},aZzE:function(e,t){e.exports='<div id=\"content\">\\r\\n  <sa-widgets-grid>\\r\\n    <div class=\"row\">\\r\\n      <article class=\"col-sm-12 \">\\r\\n        <sa-widget [editbutton]=\"false\" [deletebutton]=\"false\" >\\r\\n          <header >\\r\\n            <span class=\"widget-icon\"> <i class=\"fa fa-edit\"></i> </span>\\r\\n            <h2 >\\u62a5\\u9500</h2>\\r\\n          </header>\\r\\n          <div>\\r\\n            \\x3c!--\\u5c0f\\u90e8\\u4ef6\\u5185\\u5bb9--\\x3e\\r\\n            <div class=\"widget-body no-padding\">\\r\\n              <form id=\"smart-form-register\" class=\"smart-form\" >\\r\\n                <fieldset *ngFor=\"let xc of requite_list;let ind_xc = index;\">\\r\\n                  <legend>\\u62a5\\u9500\\u660e\\u7ec6({{ind_xc+1}})</legend>\\r\\n                  <input type=\"hidden\" name=\"\">\\r\\n                  <div class=\"form-group col col-lg-6 col-md-6 col-sm-6 col-xs-12 \">\\r\\n                    <section>\\r\\n                      <label class=\"label txt-color-blue\">\\u62a5\\u9500\\u91d1\\u989d\\uff08\\u5143\\uff09<span class=\"asterisk-color\">*</span></label>\\r\\n                      <label class=\"input\">\\r\\n                        <input type=\"number\" placeholder=\"\\u8bf7\\u8f93\\u5165\\u62a5\\u9500\\u91d1\\u989d\\uff08\\u5fc5\\u586b\\uff09\" name=\"xc.price\" [ngModelOptions]=\"{standalone: true}\" [(ngModel)]=\"xc.price\" (blur)=\"sumPCount()\">\\r\\n                      </label>\\r\\n                    </section>\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-6 col-md-6 col-sm-6 col-xs-12 \">\\r\\n                    <section>\\r\\n                      <label class=\"label txt-color-blue\">\\u62a5\\u9500\\u7c7b\\u522b<span class=\"asterisk-color\">*</span></label>\\r\\n                      <label class=\"input\">\\r\\n                        <input  type=\"text\" placeholder=\"\\u5982\\u91c7\\u8d2d\\u7ecf\\u8d39\\u3001\\u6d3b\\u52a8\\u7ecf\\u8d39\\uff08\\u5fc5\\u586b\\uff09\" name=\"xc.type\" [ngModelOptions]=\"{standalone: true}\" [(ngModel)]=\"xc.type\" value=\"{{xc.type}}\">\\r\\n                      </label>\\r\\n                    </section>\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 \">\\r\\n                    <section>\\r\\n                      <label class=\"label \">\\u8d39\\u7528\\u660e\\u7ec6</label>\\r\\n                      <label class=\"textarea textarea-resizable\">\\r\\n                        <textarea class=\"custom-scroll\" rows=\"4\" name=\"xc.reason\" [ngModelOptions]=\"{standalone: true}\" [(ngModel)]=\"xc.reason\" placeholder=\"\\u8bf7\\u8f93\\u5165\\u8d39\\u7528\\u660e\\u7ec6\\u63cf\\u8ff0\"></textarea>\\r\\n                      </label>\\r\\n                    </section>\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-20 text-center\">\\r\\n                    <button class=\"btn btn-default btn-xs \" (click)=\"deleteRequite(ind_xc)\">\\r\\n                      <span class=\"hidden-mobile\">\\u5220\\u9664\\u62a5\\u9500\\u660e\\u7ec6({{ind_xc + 1}})</span>\\r\\n                    </button>\\r\\n                  </div>\\r\\n                </fieldset>\\r\\n\\r\\n                <fieldset>\\r\\n                  <div class=\"form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-20 text-center\">\\r\\n                    <button class=\"btn btn-save btn-xs \" (click)=\"joinRequite()\" >\\r\\n                      <i class=\"fa fa-plus\"></i> <span class=\"hidden-mobile\">\\u6dfb\\u52a0\\u62a5\\u9500\\u660e\\u7ec6</span>\\r\\n                    </button>\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-20\">\\r\\n                    <div class=\"txt-color-blueLight\">\\u603b\\u62a5\\u9500\\u91d1\\u989d\\uff08\\u5143\\uff09\\uff1a<span class=\" txt-color-blue pd-10\" style=\"font-size: 24px;\">{{prices}}</span></div>\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 \">\\r\\n                    <div class=\"label \">\\u56fe\\u7247<a class=\"txt-color-blue pd-10\" (click)=\"showSelectFileDiv()\">\\u6dfb\\u52a0\\u56fe\\u7247</a><span class=\"txt-color-blueLight pd-10\">(\\u6700\\u591a\\u53ef\\u4ee5\\u9009\\u62e910\\u5f20)</span></div>\\r\\n                    <div  class=\"picture mb-20\">\\r\\n                      <div  class=\"picture-list\" *ngFor=\"let img of imgList;let ind = index;\">\\r\\n                        <a  class=\"fa fa-times-circle picture-a\" style=\"display:block;\" (click)=\"removeImg(ind)\"></a>\\r\\n                        <img width=\"90px\" height=\"90px\" src=\"{{url}}{{img}}\" (click)=\"showBigPic(url+img)\">\\r\\n                      </div>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-20\">\\r\\n                    <div class=\"label \">\\u9644\\u4ef6<a class=\"txt-color-blue pd-10\" >\\u6dfb\\u52a0\\u9644\\u4ef6</a></div>\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-20\">\\r\\n                    <div class=\"label \">\\u5ba1\\u6279\\u4eba<a class=\"txt-color-blue pd-10\" (click)=\"showDetail(\\'assign\\')\">\\u6dfb\\u52a0\\u5ba1\\u6279\\u4eba</a></div>\\r\\n                    <ul  class=\"avatars\" *ngIf=\"approve_user\">\\r\\n                      <li *ngFor=\"let su of approve_user;let ind = index;\">\\r\\n                        <a class=\"fa fa-times-circle picture-a\" style=\"display:block;\" (click)=\"removeUser(su.id,\\'assign\\')\"></a>\\r\\n                        <a class=\"portrait-size\" title=\"{{su.u_username}}\">\\r\\n                          {{su.u_username}}\\r\\n                        </a>\\r\\n                        <div class=\"approval-arrow\" *ngIf=\"ind < approve_user.length && ind != 0\" >\\r\\n                          <img src=\"assets/img/icon/arrow.png\" >\\r\\n                        </div>\\r\\n                      </li>\\r\\n                    </ul>\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-20\">\\r\\n                    <div class=\"label \">\\u6284\\u9001\\u4eba<a class=\"txt-color-blue pd-10\" (click)=\"showDetail(\\'follower\\')\">\\u6dfb\\u52a0\\u6284\\u9001\\u4eba</a><span class=\"txt-color-blueLight pd-10\">(\\u5ba1\\u6279\\u901a\\u8fc7\\u540e\\uff0c\\u901a\\u77e5\\u6284\\u9001\\u4eba)</span></div>\\r\\n                    <ul  class=\"avatars\" *ngIf=\"follower_user\">\\r\\n                      <li *ngFor=\"let su1 of follower_user;let ind1 = index;\">\\r\\n                        <a class=\"fa fa-times-circle picture-a\" style=\"display:block;\" (click)=\"removeUser(su1.id,\\'follower\\')\"></a>\\r\\n                        <a class=\"portrait-size\" title=\"{{su1.u_username}}\">\\r\\n                          {{su1.u_username}}\\r\\n                        </a>\\r\\n                      </li>\\r\\n                    </ul>\\r\\n                  </div>\\r\\n                </fieldset>\\r\\n                <footer>\\r\\n                  <button type=\"button\" class=\"btn btn-default\" >\\r\\n                    \\u8fd4\\u56de\\r\\n                  </button>\\r\\n                  <button class=\"btn btn-success\" type=\"button\" (click)=\"onSubmit(2)\">\\u63d0\\u4ea4\\u5e76\\u65b0\\u589e</button>\\r\\n                  <button  type=\"submit\" class=\"btn btn-primary\" (click)=\"onSubmit(1)\">\\r\\n                    \\u63d0\\u4ea4\\r\\n                  </button>\\r\\n                </footer>\\r\\n              </form>\\r\\n            </div>\\r\\n          </div>\\r\\n        </sa-widget>\\r\\n      </article>\\r\\n    </div>\\r\\n  </sa-widgets-grid>\\r\\n</div>\\r\\n\\r\\n\\x3c!--\\u9009\\u62e9\\u5ba1\\u6279\\u4eba\\u548c\\u6284\\u9001\\u4eba--\\x3e\\r\\n<app-select-user (approve_users)=\"getData($event)\" [is_show_detail]=\"is_show_detail\" (is_show_details)=\"getShowStatus($event)\" [approval_or_copy]=\"approval_or_copy\" *ngIf=\"is_show_detail\"></app-select-user>\\r\\n\\x3c!--\\u9009\\u4e0d\\u7528\\u88c1\\u526a\\u7684\\u56fe\\u7247--\\x3e\\r\\n<app-select-file [select_type]=\"select_type\" [imgList]=\"imgList\" (select_types)=\"getSelectTypes()\" (imgLists)=\"getImgLists($event)\"></app-select-file>\\r\\n\\x3c!--\\u67e5\\u770b\\u5927\\u56fe--\\x3e\\r\\n<app-big-pic [select_type]=\"select_type\" [show_big_pic]=\"show_big_pic\" (select_types)=\"getSelectTypes()\"></app-big-pic>\\r\\n'}});","extractedComments":[]}