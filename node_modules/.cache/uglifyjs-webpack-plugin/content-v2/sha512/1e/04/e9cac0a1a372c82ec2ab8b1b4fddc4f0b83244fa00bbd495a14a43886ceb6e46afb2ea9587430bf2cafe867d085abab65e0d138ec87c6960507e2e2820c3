{"code":"webpackJsonp([74],{gN8b:function(e,t){e.exports='\\x3c!-- MAIN CONTENT --\\x3e\\r\\n<div id=\"content\">\\r\\n  <div class=\"row\">\\r\\n    <sa-big-breadcrumbs *ngIf=\"c_id == 0\" [items]=\"[\\'\\u4f01\\u4e1a\\u8bbe\\u7f6e\\', \\'\\u6dfb\\u52a0\\u5ba2\\u6237\\']\" icon=\"pencil-square-o\" class=\"col-xs-12 col-sm-9 col-md-9 col-lg-9\"></sa-big-breadcrumbs>\\r\\n    <sa-big-breadcrumbs *ngIf=\"c_id != 0\" [items]=\"[\\'\\u4f01\\u4e1a\\u8bbe\\u7f6e\\', \\'\\u4fee\\u6539\\u5ba2\\u6237\\']\" icon=\"pencil-square-o\" class=\"col-xs-12 col-sm-9 col-md-9 col-lg-9\"></sa-big-breadcrumbs>\\r\\n  </div>\\r\\n  <sa-widgets-grid>\\r\\n    <div class=\"row\">\\r\\n      <article class=\"col-sm-12 \">\\r\\n        \\x3c!-- Widget ID (each widget will need unique ID)--\\x3e\\r\\n        <sa-widget [editbutton]=\"false\" [deletebutton]=\"false\" >\\r\\n          <header>\\r\\n            <span class=\"widget-icon\"> <i class=\"fa fa-edit\"></i> </span>\\r\\n            <h2 *ngIf=\"c_id == 0\">\\u6dfb\\u52a0\\u5ba2\\u6237</h2>\\r\\n            <h2 *ngIf=\"c_id != 0\">\\u4fee\\u6539\\u5ba2\\u6237</h2>\\r\\n          </header>\\r\\n          <div>\\r\\n            \\x3c!-- widget content --\\x3e\\r\\n            <div class=\"widget-body no-padding\">\\r\\n\\r\\n              <form id=\"smart-form-register\" class=\"smart-form\" [formGroup]=\"formModel\" (ngSubmit)=\"onSubmit()\" novalidate>\\r\\n                <fieldset>\\r\\n                  <legend>\\u57fa\\u672c\\u4fe1\\u606f</legend>\\r\\n                  <input type=\"hidden\" name=\"c_id\" formControlName=\"c_id\">\\r\\n\\r\\n                  <div class=\"form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\\r\\n                    <section >\\r\\n                      <label class=\"label\">\\u5ba2\\u6237ID</label>\\r\\n                      <label class=\"input\">\\r\\n                        <input type=\"text\" name=\"number\" placeholder=\"\\u8bf7\\u8f93\\u5165\\u5ba2\\u6237\\u7f16\\u53f7\" maxlength=\"20\" formControlName=\"number\"/>\\r\\n                      </label>\\r\\n                    </section>\\r\\n\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\\r\\n                    <section >\\r\\n                      <label class=\"label\">\\u5168\\u79f0</label>\\r\\n                      <label class=\"input\">\\r\\n                        <input type=\"text\" name=\"name\" placeholder=\"\\u8bf7\\u8f93\\u5165\\u5168\\u79f0 \" maxlength=\"30\" formControlName=\"name\"/>\\r\\n                      </label>\\r\\n                    </section>\\r\\n\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\\r\\n                    <section >\\r\\n                      <label class=\"label\">\\u7b80\\u79f0</label>\\r\\n                      <label class=\"input\">\\r\\n                        <input type=\"text\" name=\"abbreviation\" placeholder=\"\\u8bf7\\u8f93\\u5165\\u7b80\\u79f0 \" maxlength=\"10\" formControlName=\"abbreviation\"/>\\r\\n                      </label>\\r\\n                    </section>\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\\r\\n                    <section >\\r\\n                      <label class=\"label \">\\u6240\\u5c5e\\u884c\\u4e1a</label>\\r\\n                      <div class=\"\">\\r\\n                        <label class=\"select\">\\r\\n                          <select name=\"industry_category\" formControlName=\"industry_category\" [(ngModel)]=\"industry_category_default\">\\r\\n                            <option *ngFor=\"let c of userList.result?.industryCategoryList\" [selected]=\"customer_info.result?.c_industry_category == c.category_id || this.c_id == 0\" value=\"{{c.category_id}}\">{{c.category_desc}}</option>\\r\\n                          </select> <i></i> </label></div>\\r\\n                      \\x3c!--<div class=\"col col-lg-2\">\\r\\n                        <button type=\"button\" class=\"btn btn-info btn-sm\">\\r\\n                          \\u6dfb\\u52a0\\u6240\\u5c5e\\u884c\\u4e1a\\r\\n                        </button>\\r\\n                      </div>--\\x3e\\r\\n                    </section>\\r\\n\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\\r\\n                    <section >\\r\\n                      <label class=\"label\">\\u4f01\\u4e1a\\u90ae\\u7bb1</label>\\r\\n                      <label class=\"input\"> <i class=\"icon-append fa fa-envelope-o\"></i>\\r\\n                        <input name=\"email\" placeholder=\"E-mail\" type=\"email\" formControlName=\"email\">\\r\\n                      </label>\\r\\n                    </section>\\r\\n\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\\r\\n                    <div class=\"margin-left-15\">\\r\\n                      <label class=\"labe2\">\\u8054\\u7cfb\\u4eba</label>\\r\\n                      <section class=\"col col-4\">\\r\\n\\r\\n                        <label class=\"input \">\\r\\n                          <input  name=\\'contacts\\' placeholder=\"\\u8bf7\\u8f93\\u5165\\u59d3\\u540d\"  type=\"text\" formControlName=\"contacts\" maxlength=\"5\">\\r\\n                        </label>\\r\\n                      </section>\\r\\n                      <section class=\"col col-8\">\\r\\n                        <label class=\"input \"> <i class=\"icon-append fa fa-phone\"></i>\\r\\n                          <input name=\"phone\" placeholder=\"\\u8bf7\\u8f93\\u5165\\u8054\\u7cfb\\u7535\\u8bdd\" formControlName=\"phone\" samaskedinput=\"(999) 999-9999\" type=\"tel\" ng-reflect-sa-masked-input=\"(999) 999-9999\" aria-required=\"true\" class=\"valid\" aria-invalid=\"false\" maxlength=\"13\">\\r\\n                        </label>\\r\\n                      </section>\\r\\n\\r\\n                    </div>\\r\\n\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-6 col-md-6 col-sm-6 col-xs-12 \">\\r\\n                    <div class=\"margin-left-15\">\\r\\n                      <section class=\"col col-4\">\\r\\n                        <label class=\"label txt-color-pink\">\\u6240\\u5728\\u5730</label>\\r\\n                        <label class=\"select \">\\r\\n                          <select name=\"\" >\\r\\n                            <option value=\"0\">--\\u8bf7\\u9009\\u62e9\\u7701--</option>\\r\\n                            <option ></option>\\r\\n                          </select> <i></i> </label>\\r\\n                      </section>\\r\\n                      <section class=\"col col-4\">\\r\\n                        <label class=\"select margin-top-24\">\\r\\n                          <select name=\"\" >\\r\\n                            <option value=\"0\">--\\u8bf7\\u9009\\u62e9\\u5e02--</option>\\r\\n                            <option ></option>\\r\\n                          </select> <i></i> </label>\\r\\n                      </section>\\r\\n                      <section class=\"col col-4\">\\r\\n                        <label class=\"select margin-top-24\">\\r\\n                          <select name=\"\" >\\r\\n                            <option value=\"0\">--\\u8bf7\\u9009\\u62e9\\u533a--</option>\\r\\n                            <option ></option>\\r\\n                          </select> <i></i> </label>\\r\\n                      </section>\\r\\n\\r\\n\\r\\n                    </div>\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-6 col-md-6 col-sm-6 col-xs-12 \">\\r\\n                    <section>\\r\\n                      <label class=\"label\">\\u8be6\\u7ec6\\u5730\\u5740</label>\\r\\n                      <label class=\"input\">\\r\\n                        <input  name=\\'address\\' placeholder=\"\\u8bf7\\u8f93\\u5165\\u8be6\\u7ec6\\u5730\\u5740\"  type=\"text\" formControlName=\"address\">\\r\\n                      </label>\\r\\n                    </section>\\r\\n                  </div>\\r\\n\\r\\n\\r\\n                  <div class=\"form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\\r\\n                    <section>\\r\\n                      <label class=\"label\">\\u94fe\\u63a5\\u767e\\u5ea6\\u4e91\\u5bc6\\u94a5</label>\\r\\n                      <label class=\"input\">\\r\\n                        <input  name=\\'iot_secret\\' placeholder=\"\\u8bf7\\u8f93\\u5165\\u94fe\\u63a5\\u767e\\u5ea6\\u4e91\\u5bc6\\u94a5\" type=\"text\" >\\r\\n                      </label>\\r\\n                    </section>\\r\\n\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 \">\\r\\n                    <section>\\r\\n                      <label class=\"label\">\\u4e3b\\u8981\\u4ea7\\u54c1</label>\\r\\n                      <label class=\"textarea textarea-resizable\">\\r\\n                        <textarea class=\"custom-scroll\" rows=\"3\" name=\"products\" formControlName=\"products\"></textarea>\\r\\n                      </label>\\r\\n                    </section>\\r\\n                  </div>\\r\\n\\r\\n                </fieldset>\\r\\n\\r\\n                <fieldset>\\r\\n                  <legend>\\u5176\\u4ed6\\u4fe1\\u606f</legend>\\r\\n                </fieldset>\\r\\n\\r\\n                <div [ngStyle]=\"{\\'display\\':is_showDiv?\\'block\\':\\'none\\'}\">\\r\\n                  <fieldset >\\r\\n                    <div class=\"form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\\r\\n                      <section >\\r\\n                        <label class=\"label\">\\u5ba2\\u6237\\u6765\\u6e90</label>\\r\\n                        <div class=\"\">\\r\\n                          <label class=\"select\">\\r\\n                            <select name=\"source\" formControlName=\"source\" [(ngModel)]=\"source_default\">\\r\\n                              <option *ngFor=\"let c of userList.result?.sourceList\" [selected]=\"customer_info.result?.c_source == c.category_id || this.c_id == 0\" value=\"{{c.category_id}}\">{{c.category_desc}}</option>\\r\\n                            </select> <i></i> </label></div>\\r\\n                        \\x3c!--<div class=\"col col-lg-4\">\\r\\n                          <button type=\"button\" class=\"btn btn-info btn-sm\">\\r\\n                            \\u6dfb\\u52a0\\u5ba2\\u6237\\u6765\\u6e90\\r\\n                          </button>\\r\\n                        </div>--\\x3e\\r\\n                      </section>\\r\\n\\r\\n                    </div>\\r\\n                    <div class=\"form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\\r\\n                      <section >\\r\\n                        <label class=\"label\">\\u534f\\u52a9\\u8ddf\\u8fdb\\u4eba</label>\\r\\n                        <label class=\"select\">\\r\\n                          <select name=\"service_person\" formControlName=\"service_person\" [(ngModel)]=\"service_person_default\">\\r\\n                            <option *ngFor=\"let u of userList.result?.userList\" [selected]=\"customer_info.result?.c_service_person == u.id || this.c_id == 0\" value=\"{{u.id}}\">{{u.u_username}}</option>\\r\\n                          </select> <i></i> </label>\\r\\n                      </section>\\r\\n\\r\\n                    </div>\\r\\n                    <div class=\"form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\\r\\n                      <section >\\r\\n                        <label class=\"label\">\\u5ba2\\u6237\\u914d\\u7f6e</label>\\r\\n                        <label class=\"input\">\\r\\n                          <input type=\"text\" formControlName=\"config\" name=\"config\" placeholder=\"\\u8bf7\\u8f93\\u5165\\u5ba2\\u6237\\u914d\\u7f6e \"/>\\r\\n                        </label>\\r\\n                      </section>\\r\\n\\r\\n                    </div>\\r\\n                    <div class=\"form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 \">\\r\\n                      <section>\\r\\n                      <label class=\"label\">\\u5907\\u6ce8\\u8bf4\\u660e</label>\\r\\n                        <label class=\"textarea textarea-resizable\">\\r\\n                          <textarea formControlName=\"notes\" name=\"notes\" class=\"custom-scroll\" rows=\"3\"></textarea>\\r\\n                        </label>\\r\\n                      </section>\\r\\n                    </div>\\r\\n\\r\\n                  </fieldset>\\r\\n                </div>\\r\\n                <fieldset>\\r\\n\\r\\n                  <button type=\"button\" class=\"btn btn-primary btn-sm margin-top-20 margin-left-20\" (click)=\"changeDivStatus()\" >\\r\\n                    {{(is_showDiv == true) ?\\'\\u6536\\u8d77\\':\\'\\u5c55\\u5f00\\'}}\\r\\n                  </button>\\r\\n                </fieldset>\\r\\n                <footer>\\r\\n                  <button type=\"button\" class=\"btn btn-default\" >\\r\\n                    \\u8fd4\\u56de\\r\\n                  </button>\\r\\n                  <button class=\"btn btn-success\" type=\"button\">\\u63d0\\u4ea4\\u5e76\\u65b0\\u589e</button>\\r\\n                  <button type=\"submit\" class=\"btn btn-primary\">\\r\\n                    \\u63d0\\u4ea4\\r\\n                  </button>\\r\\n                </footer>\\r\\n              </form>\\r\\n            </div>\\r\\n            \\x3c!-- end widget content --\\x3e\\r\\n          </div>\\r\\n          \\x3c!-- end widget div --\\x3e\\r\\n        </sa-widget>\\r\\n      </article>\\r\\n      \\x3c!-- END COL --\\x3e\\r\\n    </div>\\r\\n    \\x3c!-- END ROW --\\x3e\\r\\n  </sa-widgets-grid>\\r\\n  \\x3c!-- end widget grid --\\x3e\\r\\n</div>\\r\\n'},jsM6:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(\"WT6e\"),n=r(\"Xjw4\"),l=r(\"D1Z2\"),s=r(\"7DMc\"),i=r(\"IvH+\"),c=r(\"NOoU\"),a=r(\"bfOx\"),u=r(\"ntJC\"),d=r(\"R12H\"),m=this&&this.__decorate||function(e,t,r,o){var n,l=arguments.length,s=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(s=(l<3?n(s):l>3?n(t,r,s):n(t,r))||s);return l>3&&s&&Object.defineProperty(t,r,s),s},b=this&&this.__metadata||function(e,t){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,r,o,n,l){this.http=t,this.router=r,this.routInfo=o,this.cookieStore=n,this.globalService=l,this.userList=[],this.c_id=0,this.customer_info=[],this.is_showDiv=!1,this.rollback_url=\"/forms/customer\";this.globalService.navEventEmitter.emit('{\"title\":\"\\u6dfb\\u52a0\\u5ba2\\u6237\",\"url\":\"/forms/customer/0\",\"class_\":\"active\"}'),this.formModel=e.group({c_id:[\"\"],number:[\"\",[s.g.required,s.g.minLength(1)]],name:[\"\",[s.g.required,s.g.minLength(1)]],abbreviation:[\"\"],industry_category:[\"\"],email:[\"\"],phone:[\"\",i.b,i.a],department:[\"\"],address:[\"\"],contacts:[\"\"],products:[\"\"],source:[\"\"],service_person:[\"\"],config:[\"\"],notes:[\"\"],iot_secret:[\"\"]})}return e.prototype.ngOnInit=function(){this.c_id=this.routInfo.snapshot.params.c_id,0!=this.c_id?(this.getCustomerInfo(this.c_id),this.rollback_url+=\"/\"+this.c_id):this.rollback_url+=\"/0\",this.getCustomerDefault()},e.prototype.changeDivStatus=function(){this.is_showDiv=0==this.is_showDiv},e.prototype.getCustomerInfo=function(e){var t=this;this.http.get(this.globalService.getDomain()+\"/api/v1/getCustomerInfo?c_id=\"+e+\"&c_role=1\").map(function(e){return e.json()}).subscribe(function(e){t.customer_info=e}),setTimeout(function(){console.log(t.customer_info),t.formModel.patchValue({c_id:t.customer_info.result.c_id,number:t.customer_info.result.c_number,name:t.customer_info.result.c_name,phone:t.customer_info.result.c_phone,email:t.customer_info.result.c_email,abbreviation:t.customer_info.result.c_abbreviation,industry_category:t.customer_info.result.c_industry_category,department:t.customer_info.result.c_department,address:t.customer_info.result.c_address,contacts:t.customer_info.result.c_contacts,products:t.customer_info.result.c_products,source:t.customer_info.result.c_source,service_person:t.customer_info.result.c_service_person,config:t.customer_info.result.c_config,notes:t.customer_info.result.c_notes,role:t.customer_info.result.c_role,iot_secret:t.customer_info.result.iot_secret,parent_id:t.customer_info.result.c_parent_id})},500)},e.prototype.getCustomerDefault=function(){var e=this;this.http.get(this.globalService.getDomain()+\"/api/v1/getCustomerDefault?sid=\"+this.cookieStore.getCookie(\"sid\")).map(function(e){return e.json()}).subscribe(function(t){e.userList=t}),setTimeout(function(){console.log(\"this.userList:----\"),console.log(e.userList),202==e.userList.status&&(alert(e.userList.msg),e.cookieStore.removeAll(e.rollback_url),e.router.navigate([\"/auth/login\"])),0==e.c_id&&(e.industry_category_default=e.userList.result.industryCategoryList.length>=1?e.userList.result.industryCategoryList[0].category_id:0,e.source_default=e.userList.result.sourceList.length>=1?e.userList.result.sourceList[0].category_id:0,e.service_person_default=e.userList.result.userList.length>=1?e.userList.result.userList[0].id:0)},300)},e.prototype.onSubmit=function(){var e=this;return\"\"==this.formModel.value.number.trim()?(alert(\"\\u8bf7\\u586b\\u5199\\u5ba2\\u6237\\u7f16\\u53f7\\uff01\"),!1):\"\"==this.formModel.value.name.trim()?(alert(\"\\u8bf7\\u586b\\u5199\\u5ba2\\u6237\\u540d\\u79f0\\uff01\"),!1):void this.http.post(this.globalService.getDomain()+\"/api/v1/addCustomer\",{c_id:this.formModel.value.c_id,number:this.formModel.value.number,name:this.formModel.value.name,phone:this.formModel.value.phone,email:this.formModel.value.email,abbreviation:this.formModel.value.abbreviation,industry_category:this.formModel.value.industry_category,department:this.formModel.value.department,address:this.formModel.value.address,contacts:this.formModel.value.contacts,products:this.formModel.value.products,source:this.formModel.value.source,service_person:this.formModel.value.service_person,config:this.formModel.value.config,notes:this.formModel.value.notes,iot_secret:this.formModel.value.iot_secret,role:1,parent_id:0,sid:this.cookieStore.getCookie(\"sid\")}).subscribe(function(t){var r=JSON.parse(t._body);alert(r.msg),200==r.status?e.router.navigateByUrl(\"/tables/client\"):202==r.status&&(e.cookieStore.removeAll(e.rollback_url),e.router.navigate([\"/auth/login\"]))},function(e){console.log(\"PATCH call in error\",e)})},e=m([Object(l.a)(),Object(o.Component)({selector:\"app-add-customer\",template:r(\"gN8b\")}),b(\"design:paramtypes\",[s.a,c.b,a.c,a.a,u.a,d.a])],e)}(),p=r(\"pvSQ\"),g=[{path:\"\",component:f}],v=a.d.forChild(g),_=r(\"JOm+\"),h=r(\"jfyD\");r.d(t,\"AddCustomerModule\",function(){return x});var y=this&&this.__decorate||function(e,t,r,o){var n,l=arguments.length,s=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(s=(l<3?n(s):l>3?n(t,r,s):n(t,r))||s);return l>3&&s&&Object.defineProperty(t,r,s),s},x=function(){function e(){}return e=y([Object(o.NgModule)({imports:[n.CommonModule,s.f,p.a,_.a,v],declarations:[f],providers:[h.CookieService,u.a]})],e)}()}});","extractedComments":[]}