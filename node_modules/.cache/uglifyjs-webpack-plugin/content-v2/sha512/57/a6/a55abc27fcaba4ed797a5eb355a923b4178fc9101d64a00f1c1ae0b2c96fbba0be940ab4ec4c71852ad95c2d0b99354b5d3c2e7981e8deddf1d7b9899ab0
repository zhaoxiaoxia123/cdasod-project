{"code":"webpackJsonp([61],{HEen:function(t,e,o){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var l=o(\"WT6e\"),s=o(\"Xjw4\"),r=o(\"bfOx\"),n=o(\"NOoU\"),a=o(\"ntJC\"),i=o(\"R12H\"),c=o(\"7DMc\"),d=o(\"Exih\"),u=o(\"OMJi\"),p=o(\"xHjW\"),_=this&&this.__decorate||function(t,e,o,l){var s,r=arguments.length,n=r<3?e:null===l?l=Object.getOwnPropertyDescriptor(e,o):l;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,l);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(n=(r<3?s(n):r>3?s(e,o,n):s(e,o))||n);return r>3&&n&&Object.defineProperty(e,o,n),n},h=this&&this.__metadata||function(t,e){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=function(){function t(t,e,o,l,s,r,n){this.http=e,this.router=o,this.routInfo=l,this.cookieStore=s,this.globalService=r,this.notificationService=n,this.stock_allot_id=0,this.stockallotList=[],this.stockallotInfo=[],this.departmentInfo=[],this.department=\"\",this.selectProductList=[],this.searchProductList=[],this.productDefault=[],this.select_category_ids=[],this.category_type_product=6,this.keyword_product=\"\",this.showUl=1,this.showUlChild=0,this.selects=[],this.selects_index=[],this.check=!1,this.prev=!1,this.next=!1,this.isDetail=\"\",this.keyword=\"\",this.p_type=2,this.datePickerConfig={locale:\"zh-CN\",format:\"YYYY-MM-DD\",enableMonthSelector:!0,showMultipleYearsNavigation:!0},this.user_u_id_default=0,this.out_storehouse_id_default=0,this.in_storehouse_id_default=0,this.rollback_url=\"/inventory-management/add-requisition\",this.approve_user=[],this.follower_user=[],this.transfer_user=[],this.remove_user_ids=[],this.approval_or_copy=\"\",this.is_show_detail=\"\",this.is_show_details=\"\",this.approve_users=[],this.operate_type=\"\",this.operate_button_type=\"\",this.operate_button_type_is_more=\"\",this.operate_types=\"\",this.uid=0,this.create_user_id=0,this.log_type=\"stockallot\",this.log_table_name=\"stockallot\";this.globalService.navEventEmitter.emit('{\"title\":\"\\u6dfb\\u52a0\\u8c03\\u62e8\\u5355\",\"url\":\"/inventory-management/add-requisition/0\",\"class_\":\"active\"}'),this.uid=this.cookieStore.getCookie(\"uid\"),this.formModel=t.group({stock_allot_id:[\"\"],stock_allot_type:[\"\"],stock_allot_number:[\"\"],stock_allot_date:[\"\"],user_u_id:[\"\"],stock_allot_qrcode:[\"\"],stock_allot_remark:[\"\"],department:[\"\"],out_storehouse_id:[\"\"],in_storehouse_id:[\"\"],stock_allot_assign:[\"\"],stock_allot_copy_person:[\"\"]})}return t.prototype.ngOnInit=function(){var t=this.routInfo.snapshot.params.stock_allot_id;if(\"\"!=t&&\"0\"!=t){if(t.indexOf(\"_\")>=0){var e=t.split(\"_\");this.stock_allot_id=e[0],this.isDetail=e[1]}else this.stock_allot_id=t;this.getStockallotInfo(this.stock_allot_id),this.rollback_url+=\"/\"+t}else this.rollback_url+=\"/0\";this.getStockallotDefault(\"\")},t.prototype.getStockallotInfo=function(t){var e=this;this.http.get(this.globalService.getDomain()+\"/api/v1/getStockallotInfo?stock_allot_id=\"+t).map(function(t){return t.json()}).subscribe(function(t){e.stockallotInfo=t,e.formModel.patchValue({stock_allot_id:e.stockallotInfo.result.stock_allot_id,stock_allot_type:e.stockallotInfo.result.stock_allot_type,stock_allot_number:e.stockallotInfo.result.stock_allot_number,stock_allot_date:e.stockallotInfo.result.stock_allot_date,user_u_id:e.stockallotInfo.result.user_u_id,stock_allot_qrcode:e.stockallotInfo.result.stock_allot_qrcode,stock_allot_remark:e.stockallotInfo.result.stock_allot_remark,out_storehouse_id:e.stockallotInfo.result.out_storehouse_id,in_storehouse_id:e.stockallotInfo.result.in_storehouse_id,stock_allot_assign:e.stockallotInfo.result.stock_allot_assign,stock_allot_copy_person:e.stockallotInfo.result.stock_allot_copy_person}),e.create_user_id=e.stockallotInfo.result.u_id,e.approve_user=e.stockallotInfo.result.assign_user_name,e.follower_user=e.stockallotInfo.result.copy_user,e.user_u_id_default=e.stockallotInfo.result.user_u_id,e.out_storehouse_id_default=e.stockallotInfo.result.out_storehouse_id,e.in_storehouse_id_default=e.stockallotInfo.result.in_storehouse_id,e.selectProductList=e.stockallotInfo.result.detail,0!=e.stockallotInfo.result.user_u_id&&e.getDepartment(e.stockallotInfo.result.user_u_id,2)})},t.prototype.getDepartment=function(t,e){var o=this,l=0;l=1==e?t.target.value:t;var s=this.globalService.getDomain()+\"/api/v1/getDepartment\";0!=l&&(s+=\"?u_id=\"+l),this.http.get(s).map(function(t){return t.json()}).subscribe(function(t){o.departmentInfo=t,201==o.departmentInfo.status?alert(o.departmentInfo.msg):200==o.departmentInfo.status&&(o.department=o.departmentInfo.result.department_name)})},t.prototype.getStockallotDefault=function(t){var e=this;this.http.get(this.globalService.getDomain()+\"/api/v1/getStockallotDefault?sid=\"+this.cookieStore.getCookie(\"sid\")).map(function(t){return t.json()}).subscribe(function(t){e.stockallotList=t,202==e.stockallotList.status&&(alert(e.stockallotList.msg),e.cookieStore.removeAll(e.rollback_url),e.router.navigate([\"/auth/login\"]))}),\"\"==t&&this.getProductDefault()},t.prototype.onSubmit=function(){var t=this;if(\"\"==this.formModel.value.stock_allot_date.trim())return alert(\"\\u8bf7\\u586b\\u5199\\u8c03\\u62e8\\u5355\\u65e5\\u671f\\uff01\"),!1;if(\"\"==this.formModel.value.stock_allot_number.trim())return alert(\"\\u8bf7\\u586b\\u5199\\u8c03\\u62e8\\u5355\\u53f7\\uff01\"),!1;var e=[];this.approve_user.forEach(function(t,o,l){e.push(t.id.toString())});var o=[];this.follower_user.forEach(function(t,e,l){o.push(t.id.toString())}),this.http.post(this.globalService.getDomain()+\"/api/v1/addStockallot\",{stock_allot_id:this.formModel.value.stock_allot_id,stock_allot_type:this.formModel.value.stock_allot_type,stock_allot_number:this.formModel.value.stock_allot_number,stock_allot_date:this.formModel.value.stock_allot_date,user_u_id:this.formModel.value.user_u_id,stock_allot_qrcode:this.formModel.value.stock_allot_qrcode,stock_allot_remark:this.formModel.value.stock_allot_remark,stock_allot_assign:JSON.stringify(e),stock_allot_copy_person:JSON.stringify(o),product_detail:JSON.stringify(this.selectProductList),out_storehouse_id:this.formModel.value.out_storehouse_id,in_storehouse_id:this.formModel.value.in_storehouse_id,u_id:this.cookieStore.getCookie(\"uid\"),sid:this.cookieStore.getCookie(\"sid\")}).subscribe(function(e){var o=JSON.parse(e._body);alert(o.msg),200==o.status?t.router.navigate([\"/inventory-management/inventory-requisition\"]):202==o.status&&(t.cookieStore.removeAll(t.rollback_url),t.router.navigate([\"/auth/login\"]))})},t.prototype.searchKey=function(t){var e=this,o=this.globalService.getDomain()+\"/api/v1/getProductList?page=\"+t+\"&p_type=\"+this.p_type+\"&type=list&sid=\"+this.cookieStore.getCookie(\"sid\");\"\"!=this.keyword_product.trim()?o+=\"&keyword=\"+this.keyword_product.trim():o+=\"&keyword=\"+this.keyword.trim();var l=\"\";this.select_category_ids.forEach(function(t,e,o){1==t&&(l+=e+\",\")}),o+=\"&category_ids=\"+l,this.http.get(o).map(function(t){return t.json()}).subscribe(function(t){if(e.searchProductList=t,202==e.searchProductList.status&&(alert(e.searchProductList.msg),e.cookieStore.removeAll(e.rollback_url),e.router.navigate([\"/auth/login\"])),e.lgModal.isShown||e.lgModal.show(),e.searchProductList&&e.searchProductList.result.productList.length>0){e.searchProductList.result.productList.current_page==e.searchProductList.result.productList.last_page?e.next=!0:e.next=!1,1==e.searchProductList.result.productList.current_page?e.prev=!0:e.prev=!1;for(var o=0,l=e.searchProductList.result.productList.data;o<l.length;o++){var s=l[o];e.selects[s.p_id]=!1}e.check=!1}})},t.prototype.getProductDefault=function(){var t=this;this.http.get(this.globalService.getDomain()+\"/api/v1/getProductDefault?type=list&p_type=\"+this.p_type+\"&category_type=\"+this.category_type_product+\"&sid=\"+this.cookieStore.getCookie(\"sid\")).map(function(t){return t.json()}).subscribe(function(e){t.productDefault=e,202==t.productDefault.status&&(alert(t.productDefault.msg),t.cookieStore.removeAll(t.rollback_url),t.router.navigate([\"/auth/login\"])),t.select_category_ids[0]=!0,t.productDefault.result.categoryList.forEach(function(e,o,l){t.select_category_ids[e.category_id]=!0,e.has_child>=1&&e.child.forEach(function(e,o,l){t.select_category_ids[e.category_id]=!0})})})},t.prototype.pagination=function(t){this.searchKey(t)},t.prototype.selectCategoryAll=function(){var t=this;1==this.select_category_ids[0]?(this.select_category_ids[0]=!1,this.productDefault.result.categoryList.forEach(function(e,o,l){t.select_category_ids[e.category_id]=!1,e.has_child>=1&&e.child.forEach(function(e,o,l){t.select_category_ids[e.category_id]=!1})})):(this.select_category_ids[0]=!0,this.productDefault.result.categoryList.forEach(function(e,o,l){t.select_category_ids[e.category_id]=!0,e.has_child>=1&&e.child.forEach(function(e,o,l){t.select_category_ids[e.category_id]=!0})})),this.searchKey(\"1\")},t.prototype.showLeftUl=function(t){this.showUl=t},t.prototype.showLeftUlChild=function(t){this.showUlChild=t},t.prototype.changeCheckAll=function(t){var e=this,o=t.target.checked,l=0;this.selects.forEach(function(t,s,r){e.selects[s]=o,e.selects_index[l]=1==o?s:s+\"_\",l++}),this.check=o},t.prototype.handle=function(t,e){var o=t.target,l=o.value,s=o.checked;this.selects[l]=s;for(var r=0,n=0,a=this.selects;n<a.length;n++){0==a[n]&&(r+=1)}this.selects_index[e]=1==s?l:l+\"_\",this.check=!(r>=1)},t.prototype.selectCategory=function(t,e,o,l){var s=this;if(1==l)1==this.select_category_ids[t]?(this.productDefault.result.categoryList[e]&&this.productDefault.result.categoryList[e].child_count>=1&&this.productDefault.result.categoryList[e].child.forEach(function(t,e,o){s.select_category_ids[t.category_id]=!1}),this.select_category_ids[t]=!1):(this.select_category_ids[t]=!0,this.productDefault.result.categoryList[e]&&this.productDefault.result.categoryList[e].child_count>=1&&this.productDefault.result.categoryList[e].child.forEach(function(t,e,o){s.select_category_ids[t.category_id]=!0}));else if(1!=l)if(1==this.select_category_ids[t])this.select_category_ids[l]=!1,this.select_category_ids[t]=!1;else{this.select_category_ids[t]=!0;var r=0;this.productDefault.result.categoryList[e]&&this.productDefault.result.categoryList[e].child_count>=1&&this.productDefault.result.categoryList[e].child.forEach(function(t,e,o){(0==s.select_category_ids[t.category_id]||Object(u.isUndefined)(s.select_category_ids[t.category_id]))&&r++}),0==r&&(this.select_category_ids[l]=!0)}this.searchKey(\"1\")},t.prototype.closeSubmit=function(){var t=this,e=0;this.selects.forEach(function(o,l,s){t.selects[l]=!1,t.selects_index[e]=l+\"_\",e++}),this.check=!1},t.prototype.addInput=function(){var t=this,e=[];this.selectProductList.forEach(function(t,o,l){e.push(t.p_id)}),e.length>0?this.selects_index.forEach(function(o,l,s){var r=o.split(\"_\");o.indexOf(\"_\")<0&&!t.cookieStore.in_array(o,e)?t.selectProductList[t.selectProductList.length]=t.searchProductList.result.productList.data[l]:o.indexOf(\"_\")>=0&&t.cookieStore.in_array(r[0],e)&&t.selectProductList.forEach(function(e,o,l){r[0]!=e.p_id||t.selectProductList.splice(o,1)})}):this.selects_index.forEach(function(e,o,l){e.indexOf(\"_\")<0&&t.selectProductList.push(t.searchProductList.result.productList.data[o])})},t.prototype.removeInput=function(t){this.selectProductList.splice(t,1)},t.prototype.showDetail=function(t){var e=this;this.approval_or_copy=t,setTimeout(function(){e.is_show_detail=\"1\"},500)},t.prototype.getData=function(t){var e=this,o=\"\";\"assign\"==this.approval_or_copy?this.approve_user=JSON.parse(t):\"follower\"==this.approval_or_copy?this.follower_user=JSON.parse(t):\"transfer\"==this.approval_or_copy&&(this.transfer_user=JSON.parse(t),this.transfer_user.forEach(function(t,e,l){o+='\"'+t.id+'\",'}),this.http.post(this.globalService.getDomain()+\"/api/v1/addStockAllotLog\",{other_id:this.stock_allot_id,other_table_name:this.log_table_name,log_type:this.log_type,log_operation_type:\"transfer\",log_uid:o,create_user_id:this.stockallotInfo.result.u_id,u_id:this.cookieStore.getCookie(\"uid\"),sid:this.cookieStore.getCookie(\"sid\")}).subscribe(function(t){var o=JSON.parse(t._body);200==o.status?e.getStockallotInfo(e.stock_allot_id):202==o.status?(alert(o.msg),e.cookieStore.removeAll(e.rollback_url),e.router.navigate([\"/auth/login\"])):9999!=o.status&&201!=o.status||alert(o.msg)}))},t.prototype.getShowStatus=function(t){this.is_show_detail=t},t.prototype.removeUser=function(t,e){this.remove_user_ids.push(t);var o=[];\"assign\"==e?(this.approve_user.forEach(function(e,l,s){e.id!=t&&o.push(e)}),this.approve_user=o):\"follower\"==e&&(this.follower_user.forEach(function(e,l,s){e.id!=t&&o.push(e)}),this.follower_user=o)},t.prototype.showModal=function(t,e){this.operate_type=t,this.operate_button_type=e,this.operate_button_type_is_more=\"\"},t.prototype.getOperateTypes=function(t){this.operate_type=\"\",this.operate_button_type=\"\",this.getStockallotInfo(this.stock_allot_id)},t.prototype.smartModEg1=function(){this.notificationService.smartMessageBox({title:\"\\u6dfb\\u52a0\",content:\"\\u8bf7\\u5728\\u65b0\\u9875\\u9762\\u6dfb\\u52a0\\u9009\\u9879\\uff0c\\u6dfb\\u52a0\\u5b8c\\u6210\\u540e\\u5728\\u5f53\\u524d\\u9875\\u9762\\u70b9\\u51fb<i class='fa fa-link'></i>\\u5237\\u65b0\\u6309\\u94ae\\u7ee7\\u7eed\\u9009\\u62e9\\uff08\\u6ce8\\uff1a\\u5237\\u65b0\\u6309\\u94ae\\u53ea\\u662f\\u5c40\\u90e8\\u5237\\u65b0\\uff09\",buttons:\"[\\u53d6\\u6d88][\\u786e\\u5b9a]\"},function(t){})},_([Object(l.ViewChild)(\"lgModal\"),h(\"design:type\",d.d)],t.prototype,\"lgModal\",void 0),t=_([Object(l.Component)({selector:\"app-add-requisition\",template:o(\"z6hO\")}),h(\"design:paramtypes\",[c.a,n.b,r.c,r.a,a.a,i.a,p.a])],t)}(),g=[{path:\"\",component:f}],b=r.d.forChild(g),m=o(\"pvSQ\"),y=o(\"JOm+\"),k=o(\"jfyD\"),v=o(\"SSMX\"),x=o(\"50Tv\"),I=o(\"pkyk\");o.d(e,\"AddRequisitionModule\",function(){return D});var w=this&&this.__decorate||function(t,e,o,l){var s,r=arguments.length,n=r<3?e:null===l?l=Object.getOwnPropertyDescriptor(e,o):l;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,l);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(n=(r<3?s(n):r>3?s(e,o,n):s(e,o))||n);return r>3&&n&&Object.defineProperty(e,o,n),n},D=function(){function t(){}return t=w([Object(l.NgModule)({imports:[s.CommonModule,m.a,y.a,c.b,c.f,v.a,x.a,I.a,b],declarations:[f],providers:[k.CookieService,a.a]})],t)}()},z6hO:function(t,e){t.exports='<div id=\"content\">\\r\\n  <sa-widgets-grid>\\r\\n    <div class=\"row\">\\r\\n      <article class=\"col-sm-12 \">\\r\\n        <sa-widget [editbutton]=\"false\" [deletebutton]=\"false\" >\\r\\n          <header *ngIf=\"stock_allot_id == 0\">\\r\\n            <span class=\"widget-icon\"> <i class=\"fa fa-edit\"></i> </span>\\r\\n            <h2 >\\u6dfb\\u52a0\\u8c03\\u62e8\\u5355</h2>\\r\\n          </header>\\r\\n          <header *ngIf=\"stock_allot_id != 0 && isDetail!=\\'detail\\'\">\\r\\n            <span class=\"widget-icon\"> <i class=\"glyphicon glyphicon-pencil\"></i> </span>\\r\\n            <h2 >\\u4fee\\u6539\\u8c03\\u62e8\\u5355 </h2>\\r\\n          </header>\\r\\n          <header *ngIf=\"isDetail==\\'detail\\'\">\\r\\n            <span class=\"widget-icon\"> <i class=\"glyphicon glyphicon-zoom-in\"></i> </span>\\r\\n            <h2 >\\u8be6\\u60c5 </h2>\\r\\n          </header>\\r\\n          <div>\\r\\n            \\x3c!--\\u5c0f\\u90e8\\u4ef6\\u5185\\u5bb9--\\x3e\\r\\n            <div class=\"widget-body no-padding\">\\r\\n              <form id=\"smart-form-register\" class=\"smart-form\" [formGroup]=\"formModel\" (ngSubmit)=\"onSubmit()\">\\r\\n                <fieldset>\\r\\n                  <legend>\\u57fa\\u672c\\u4fe1\\u606f</legend>\\r\\n                  <input type=\"hidden\" name=\"stock_allot_id\" formControlName=\"stock_allot_id\">\\r\\n                  <div class=\"picture-opacity\" style=\"left: -24px; top: 38px;position: absolute;z-index: 999;\">\\r\\n                    \\x3c!--\\u540c\\u610f--\\x3e\\r\\n                    <img src=\"assets/img/chapter1.png\" *ngIf=\"stockallotInfo?.result?.stock_allot_status == \\'yes\\'\">\\r\\n                    \\x3c!--\\u62d2\\u7edd--\\x3e\\r\\n                    <img src=\"assets/img/chapter2.png\" *ngIf=\"stockallotInfo?.result?.stock_allot_status == \\'no\\'\">\\r\\n                    \\x3c!--\\u4f5c\\u5e9f--\\x3e\\r\\n                    <img src=\"assets/img/chapter4.png\" *ngIf=\"stockallotInfo?.result?.stock_allot_status == \\'cancel\\'\">\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\\r\\n                    <section>\\r\\n                      <label class=\"label \">\\u8c03\\u62e8\\u65b9\\u5f0f</label>\\r\\n                      <div class=\"inline-group\">\\r\\n                        <label class=\"radio\">\\r\\n                          <input *ngIf=\"isDetail==\\'detail\\'\" disabled=\"disabled\" type=\"radio\" [checked]=\"stockallotInfo.result?.stock_allot_type == 1 || stock_allot_id == 0\" [value]=\"1\" name=\"stock_allot_type\" formControlName=\"stock_allot_type\">\\r\\n                          <input *ngIf=\"isDetail!=\\'detail\\'\" type=\"radio\" [checked]=\"stockallotInfo.result?.stock_allot_type == 1 || stock_allot_id == 0\" [value]=\"1\" name=\"stock_allot_type\" formControlName=\"stock_allot_type\">\\r\\n                          <i></i>\\u7b49\\u4ef7\\u8c03\\u62e8</label>\\r\\n                        <label class=\"radio\">\\r\\n                          <input *ngIf=\"isDetail==\\'detail\\'\" disabled=\"disabled\" type=\"radio\" [checked]=\"stockallotInfo.result?.stock_allot_type == 2\" [value]=\"2\" name=\"stock_allot_type\" formControlName=\"stock_allot_type\">\\r\\n                          <input *ngIf=\"isDetail!=\\'detail\\'\" type=\"radio\" [checked]=\"stockallotInfo.result?.stock_allot_type == 2\" [value]=\"2\" name=\"stock_allot_type\" formControlName=\"stock_allot_type\">\\r\\n                          <i></i>\\u5dee\\u4ef7\\u8c03\\u62e8</label>\\r\\n                      </div>\\r\\n                    </section>\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\\r\\n                    <section class=\"mb-6\">\\r\\n                      <label class=\"label txt-color-blue\">\\u5355\\u636e\\u65e5\\u671f<span class=\"asterisk-color\">*</span></label>\\r\\n                      <label  class=\"input\">\\r\\n                        <input *ngIf=\"isDetail==\\'detail\\'\" disabled=\"disabled\" name=\"stock_allot_date\"  maxlength=\"20\" formControlName=\"stock_allot_date\" placeholder=\"\\u9009\\u62e9\\u65e5\\u671f\" [dpDayPicker]=\"datePickerConfig\" [theme]=\"\\'dp-material\\'\" [mode]=\"\\'day\\'\" class=\"form-control ng-binding expire-text-soon\"/>\\r\\n                        <input *ngIf=\"isDetail!=\\'detail\\'\" name=\"stock_allot_date\"  maxlength=\"20\" formControlName=\"stock_allot_date\" placeholder=\"\\u9009\\u62e9\\u65e5\\u671f\" [dpDayPicker]=\"datePickerConfig\" [theme]=\"\\'dp-material\\'\" [mode]=\"\\'day\\'\" class=\"form-control ng-binding expire-text-soon\"/>\\r\\n                        \\x3c!--<input *ngIf=\"isDetail==\\'detail\\'\" disabled=\"disabled\" type=\"date\" name=\"stock_allot_date\" formControlName=\"stock_allot_date\">--\\x3e\\r\\n                        \\x3c!--<input *ngIf=\"isDetail!=\\'detail\\'\" type=\"date\" name=\"stock_allot_date\" formControlName=\"stock_allot_date\">--\\x3e\\r\\n                      </label>\\r\\n                    </section>\\r\\n                  </div>\\r\\n\\r\\n\\r\\n                  <div class=\"form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\\r\\n                    <section>\\r\\n                      <label class=\"label txt-color-blue\">\\u5355\\u636e\\u53f7<span class=\"asterisk-color\">*</span></label>\\r\\n                      <label class=\"input\">\\r\\n                        <input *ngIf=\"isDetail==\\'detail\\'\" disabled=\"disabled\" type=\"text\" placeholder=\"\\u5355\\u636e\\u53f7\" name=\"stock_allot_number\" formControlName=\"stock_allot_number\">\\r\\n                        <input *ngIf=\"isDetail!=\\'detail\\'\" type=\"text\" placeholder=\"\\u5355\\u636e\\u53f7\" name=\"stock_allot_number\" formControlName=\"stock_allot_number\">\\r\\n                      </label>\\r\\n                    </section>\\r\\n                  </div>\\r\\n\\r\\n\\r\\n                  <div class=\"form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\\r\\n                    <label class=\"label\">\\u8c03\\u51fa\\u4ed3\\u5e93</label>\\r\\n                    <section>\\r\\n                      <div class=\"input-group\">\\r\\n                        <label class=\"select form-control border-0\">\\r\\n                          <select *ngIf=\"isDetail==\\'detail\\'\" disabled=\"disabled\" name=\"out_storehouse_id\" formControlName=\"out_storehouse_id\" [(ngModel)]=\"out_storehouse_id_default\" >\\r\\n                            <option [selected]=\"stock_allot_id == 0\" value=\"0\">--\\u8bf7\\u9009\\u62e9--</option>\\r\\n                            <option *ngFor=\"let s of stockallotList.result?.storehouse\" [selected]=\"stockallotInfo.result?.out_storehouse_id == s.storehouse_id\" value=\"{{ s.storehouse_id }}\">{{s.storehouse_name}}</option>\\r\\n                          </select>\\r\\n                          <select *ngIf=\"isDetail!=\\'detail\\'\" name=\"out_storehouse_id\" formControlName=\"out_storehouse_id\" [(ngModel)]=\"out_storehouse_id_default\">\\r\\n                            <option [selected]=\"stock_allot_id == 0\" value=\"0\">--\\u8bf7\\u9009\\u62e9--</option>\\r\\n                            <option *ngFor=\"let s of stockallotList.result?.storehouse\" [selected]=\"stockallotInfo.result?.out_storehouse_id == s.storehouse_id\" value=\"{{ s.storehouse_id }}\">{{s.storehouse_name}}</option>\\r\\n                          </select>\\r\\n                          <i></i>\\r\\n                        </label>\\r\\n                        <div class=\"input-group-btn\">\\r\\n                          <a  href=\"http://cn.i3ot.com/#/forms/inventory1/0\" (click)=\"smartModEg1()\" target=\"_blank\"  class=\"btn btn-default btn-sm pb-6\" type=\"button\">\\r\\n                            \\x3c!-- <i class=\"fa fa-plus \"></i>--\\x3e \\u6dfb\\u52a0\\r\\n                          </a>\\r\\n                          <a class=\"btn btn-default btn-sm pb-6\" type=\"button\" ><i class=\"fa fa-link\"></i>\\r\\n                            \\u5237\\u65b0\\r\\n                          </a>\\r\\n                        </div>\\r\\n                      </div>\\r\\n\\r\\n                    </section>\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\\r\\n                    <label class=\"label\">\\u8c03\\u5165\\u4ed3\\u5e93</label>\\r\\n                    <section>\\r\\n                      <div class=\"input-group\">\\r\\n                        <label   class=\"select form-control border-0\">\\r\\n\\r\\n                          <select *ngIf=\"isDetail==\\'detail\\'\" disabled=\"disabled\" name=\"in_storehouse_id\" formControlName=\"in_storehouse_id\" [(ngModel)]=\"in_storehouse_id_default\" >\\r\\n                            <option [selected]=\"stock_allot_id == 0\" value=\"0\">--\\u8bf7\\u9009\\u62e9--</option>\\r\\n                            <option *ngFor=\"let s of stockallotList.result?.storehouse\" [selected]=\"stockallotInfo.result?.in_storehouse_id == s.storehouse_id\" value=\"{{ s.storehouse_id }}\">{{s.storehouse_name}}</option>\\r\\n                          </select>\\r\\n                          <select *ngIf=\"isDetail!=\\'detail\\'\" name=\"in_storehouse_id\" formControlName=\"in_storehouse_id\" [(ngModel)]=\"in_storehouse_id_default\">\\r\\n                            <option [selected]=\"stock_allot_id == 0\" value=\"0\">--\\u8bf7\\u9009\\u62e9--</option>\\r\\n                            <option *ngFor=\"let s of stockallotList.result?.storehouse\" [selected]=\"stockallotInfo.result?.in_storehouse_id == s.storehouse_id\" value=\"{{ s.storehouse_id }}\">{{s.storehouse_name}}</option>\\r\\n                          </select><i></i>\\r\\n                        </label>\\r\\n                        <div class=\"input-group-btn\">\\r\\n                          <a  href=\"http://cn.i3ot.com/#/forms/inventory1/0\" (click)=\"smartModEg1()\" target=\"_blank\"  class=\"btn btn-default btn-sm pb-6\" type=\"button\">\\r\\n                            \\x3c!-- <i class=\"fa fa-plus \"></i>--\\x3e \\u6dfb\\u52a0\\r\\n                          </a>\\r\\n                          <a class=\"btn btn-default btn-sm pb-6\" type=\"button\" ><i class=\"fa fa-link\"></i>\\r\\n                            \\u5237\\u65b0\\r\\n                          </a>\\r\\n                        </div>\\r\\n                      </div>\\r\\n\\r\\n                    </section>\\r\\n                  </div>\\r\\n\\r\\n                  <div class=\"form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\\r\\n                    <label class=\"label\">\\u7ecf\\u624b\\u4eba</label>\\r\\n                    <section>\\r\\n                      <div class=\"input-group\">\\r\\n                        <label   class=\"select form-control border-0\">\\r\\n                          <select *ngIf=\"isDetail==\\'detail\\'\" disabled=\"disabled\" name=\"user_u_id\" formControlName=\"user_u_id\" [(ngModel)]=\"user_u_id_default\" (change)=\"getDepartment($event,1)\">\\r\\n                            <option [selected]=\"stock_allot_id == 0\" value=\"0\">--\\u8bf7\\u9009\\u62e9--</option>\\r\\n                            <option *ngFor=\"let u of stockallotList.result?.user\" [selected]=\"stockallotInfo.result?.user_u_id == u.id\" value=\"{{ u.id }}\">{{u.u_username}}</option>\\r\\n                          </select>\\r\\n                          <select *ngIf=\"isDetail!=\\'detail\\'\" name=\"user_u_id\" formControlName=\"user_u_id\" [(ngModel)]=\"user_u_id_default\" (change)=\"getDepartment($event,1)\">\\r\\n                            <option [selected]=\"stock_allot_id == 0\" value=\"0\">--\\u8bf7\\u9009\\u62e9--</option>\\r\\n                            <option *ngFor=\"let u of stockallotList.result?.user\" [selected]=\"stockallotInfo.result?.user_u_id == u.id\" value=\"{{ u.id }}\">{{u.u_username}}</option>\\r\\n                          </select><i></i>\\r\\n                        </label>\\r\\n                        <div class=\"input-group-btn\">\\r\\n                          <a  href=\"http://cn.i3ot.com/#/forms/employees/0\" target=\"_blank\" (click)=\"smartModEg1()\" class=\"btn btn-default btn-sm pb-6\" type=\"button\">\\r\\n                            \\x3c!-- <i class=\"fa fa-plus \"></i>--\\x3e \\u6dfb\\u52a0\\r\\n                          </a>\\r\\n                          <a class=\"btn btn-default btn-sm pb-6\" type=\"button\" (click)=\"getStockallotDefault(\\'refresh\\')\"><i class=\"fa fa-link\"></i>\\r\\n                            \\u5237\\u65b0\\r\\n                          </a>\\r\\n                        </div>\\r\\n                      </div>\\r\\n\\r\\n                    </section>\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\\r\\n                    <section>\\r\\n                      <label class=\"label \">\\u4e1a\\u52a1\\u90e8\\u95e8</label>\\r\\n                      <label class=\"input\">\\r\\n                        \\x3c!--<i class=\"icon-append glyphicon glyphicon-search cursor-pointer\" data-toggle=\"modal\" data-target=\"#myModal\"></i>--\\x3e\\r\\n                        <input *ngIf=\"isDetail==\\'detail\\'\" disabled=\"disabled\" type=\"text\" placeholder=\"\" disabled=\"disabled\" name=\"department\" formControlName=\"department\" [(ngModel)]=\"department\">\\r\\n                        <input *ngIf=\"isDetail!=\\'detail\\'\" type=\"text\" placeholder=\"\" disabled=\"disabled\" name=\"department\" formControlName=\"department\" [(ngModel)]=\"department\">\\r\\n                      </label>\\r\\n                    </section>\\r\\n                  </div>\\r\\n\\r\\n                  <div class=\"form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 \">\\r\\n                    <section>\\r\\n                      <label class=\"label\">\\u626b\\u7801</label>\\r\\n                      <label class=\"textarea textarea-resizable\">\\r\\n                        <textarea *ngIf=\"isDetail==\\'detail\\'\" disabled=\"disabled\" class=\"custom-scroll\" rows=\"2\" name=\"stock_allot_qrcode\" formControlName=\"stock_allot_qrcode\" ></textarea>\\r\\n                        <textarea *ngIf=\"isDetail!=\\'detail\\'\" class=\"custom-scroll\" rows=\"2\" name=\"stock_allot_qrcode\" formControlName=\"stock_allot_qrcode\" ></textarea>\\r\\n                      </label>\\r\\n                    </section>\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-4 col-md-4 col-sm-6 col-xs-12 \">\\r\\n                    <section>\\r\\n                      <label class=\"label\">\\u641c\\u7d22\\u9009\\u62e9\\u5546\\u54c1\\u540d\\u79f0</label>\\r\\n                      <label class=\"input\">\\r\\n                        <i *ngIf=\"isDetail!=\\'detail\\'\" class=\"icon-append glyphicon glyphicon-search cursor-pointer\" (click)=\"searchKey(1)\"></i>\\x3c!-- data-toggle=\"modal\" data-target=\"#myModal\"--\\x3e\\r\\n                        <input *ngIf=\"isDetail==\\'detail\\'\" disabled=\"disabled\" type=\"text\" placeholder=\"\" name=\"keyword\" [(ngModel)]=\"keyword\" [ngModelOptions]=\"{standalone: true}\">\\r\\n                        <input *ngIf=\"isDetail!=\\'detail\\'\" type=\"text\" placeholder=\"\" name=\"keyword\" [(ngModel)]=\"keyword\" [ngModelOptions]=\"{standalone: true}\">\\r\\n                      </label>\\r\\n                    </section>\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 padding20\">\\r\\n                    <div class=\"widget-body no-padding\">\\r\\n                      <div  class=\"padding0\">\\r\\n                        <div style=\"z-index: 2;width:20%;float:left;\" class=\"table-responsive padding0 table-minheight\">\\r\\n                          <table style=\"margin-top: 0!important;\" class=\"table table-hover table-border table-bordered dataTable table-height-50\">\\r\\n                            <thead>\\r\\n                            <tr>\\r\\n                              <th>\\u64cd\\u4f5c</th>\\r\\n                              <th >\\u5546\\u54c1\\u540d\\u79f0 </th>\\r\\n                            </tr>\\r\\n                            </thead>\\r\\n                            <tbody>\\r\\n                            <tr *ngFor=\"let p of selectProductList;let ind = index;\">\\r\\n                              <td style=\" width: 112px;\">\\r\\n                                \\x3c!--<a *ngIf=\"isDetail!=\\'detail\\'\" class=\"btn btn-warning btn-xs\"  ><span class=\"glyphicon glyphicon-plus\"></span></a>--\\x3e\\r\\n                                <a *ngIf=\"isDetail!=\\'detail\\'\" class=\"btn btn-danger btn-xs\" (click)=\"removeInput(ind)\"><span class=\"glyphicon glyphicon-remove\"></span></a>\\r\\n                              </td>\\r\\n                              <td>\\r\\n                                {{p.p_name}}\\r\\n                                \\x3c!--<div  >--\\x3e\\r\\n                                  \\x3c!--<table border=\"0\" cellspacing=\"0\" cellpadding=\"1\">--\\x3e\\r\\n                                    \\x3c!--<tbody>--\\x3e\\r\\n                                    \\x3c!--<tr>--\\x3e\\r\\n                                      \\x3c!--<td>--\\x3e\\r\\n                                        \\x3c!--<span>--\\x3e\\r\\n                                          \\x3c!--<label class=\"input wi-200\">--\\x3e\\r\\n                                              \\x3c!--<i *ngIf=\"isDetail!=\\'detail\\'\" class=\"icon-append glyphicon glyphicon-search cursor-pointer\" (click)=\"searchKey()\"></i>&lt;!&ndash; data-toggle=\"modal\" data-target=\"#myModal\"&ndash;&gt;--\\x3e\\r\\n                                              \\x3c!--<input *ngIf=\"isDetail==\\'detail\\'\" disabled=\"disabled\" type=\"text\" placeholder=\"\" name=\"keyword\" [(ngModel)]=\"keyword\" [ngModelOptions]=\"{standalone: true}\">--\\x3e\\r\\n                                              \\x3c!--<input *ngIf=\"isDetail!=\\'detail\\'\" type=\"text\" placeholder=\"\" name=\"keyword\" [(ngModel)]=\"keyword\" [ngModelOptions]=\"{standalone: true}\">--\\x3e\\r\\n                                            \\x3c!--</label>--\\x3e\\r\\n                                        \\x3c!--</span>--\\x3e\\r\\n                                        \\x3c!--&lt;!&ndash;<form class=\"smart-form\">--\\x3e\\r\\n                                          \\x3c!--<section>--\\x3e\\r\\n                                          \\x3c!--</section>--\\x3e\\r\\n                                        \\x3c!--</form>&ndash;&gt;--\\x3e\\r\\n                                      \\x3c!--</td>--\\x3e\\r\\n                                      \\x3c!--<td>--\\x3e\\r\\n                                      \\x3c!--</td>--\\x3e\\r\\n                                    \\x3c!--</tr>--\\x3e\\r\\n                                    \\x3c!--</tbody>--\\x3e\\r\\n                                  \\x3c!--</table>--\\x3e\\r\\n                                \\x3c!--</div>--\\x3e\\r\\n                              </td>\\r\\n                            </tr>\\r\\n                            </tbody>\\r\\n                            <tfoot>\\r\\n                            <tr class=\"he-40\">\\r\\n                              <th></th>\\r\\n                              <th></th>\\r\\n                            </tr>\\r\\n                            </tfoot>\\r\\n                          </table>\\r\\n                        </div>\\r\\n                        <div style=\"padding: 0;z-index:1;width:80%;float:left;\" class=\"table-responsive table-minheight\">\\r\\n                          <table style=\"margin-top: 0!important;\" class=\"table table-hover table-border table-bordered dataTable table-height-50\">\\r\\n                            <thead>\\r\\n                            <tr>\\r\\n                              <th>\\u5546\\u54c1\\u7f16\\u7801</th>\\r\\n                              <th>\\u5546\\u54c1\\u5206\\u7c7b</th>\\r\\n                              <th>\\u89c4\\u683c\\u578b\\u53f7</th>\\r\\n                              <th>\\u5355\\u4f4d</th>\\r\\n                              <th class=\"txt-color-blue\">\\u8c03\\u51fa\\u4ed3\\u5e93</th>\\r\\n                              <th class=\"txt-color-blue\">\\u8c03\\u5165\\u4ed3\\u5e93</th>\\r\\n                              <th class=\"txt-color-blue\">\\u6570\\u91cf</th>\\r\\n                              <th class=\"txt-color-blue\">\\u8c03\\u62e8\\u5355\\u4f4d\\u6210\\u672c</th>\\r\\n                              <th>\\u8c03\\u62e8\\u6210\\u672c</th>\\r\\n                              <th class=\"txt-color-blue\">\\u8c03\\u62e8\\u8d39\\u7528</th>\\r\\n                            </tr>\\r\\n                            </thead>\\r\\n                            <tbody>\\r\\n                            <tr *ngFor=\"let p of selectProductList\">\\r\\n                              <td>{{p.p_product_id}}</td>\\r\\n                              <td>{{p.p_category_id}}</td>\\r\\n                              <td>{{p.p_specification}}</td>\\r\\n                              <td>{{p.p_unit}}</td>\\r\\n                              <td>\\r\\n                                <span>\\r\\n                                  <label   class=\"select form-control border-0 wi-100\">\\r\\n                                  <select  name=\"\" >\\r\\n                                    <option  value=\"0\">--\\u8bf7\\u9009\\u62e9--</option>\\r\\n                                    <option  value=\"1\">fgf</option>\\r\\n                                  </select><i></i>\\r\\n                                </label>\\r\\n                                </span>\\r\\n                              </td>\\r\\n                              <td>\\r\\n                                <span>\\r\\n                                  <label   class=\"select form-control border-0 wi-100\">\\r\\n                                  <select  name=\"\" >\\r\\n                                    <option  value=\"0\">--\\u8bf7\\u9009\\u62e9--</option>\\r\\n                                    <option  value=\"1\">fgf</option>\\r\\n                                  </select><i></i>\\r\\n                                </label>\\r\\n                                </span>\\r\\n                              </td>\\r\\n                              \\x3c!--<td>--\\x3e\\r\\n                                \\x3c!--<label  class=\"input\">--\\x3e\\r\\n                                  \\x3c!--<input [ngModelOptions]=\"{standalone: true}\" [(ngModel)]=\"p.p_count\" value=\"{{p.p_count}}\" type=\"number\">--\\x3e\\r\\n                                \\x3c!--</label>--\\x3e\\r\\n                              \\x3c!--</td>--\\x3e\\r\\n                              \\x3c!--<td>--\\x3e\\r\\n                                \\x3c!--<label  class=\"input\">--\\x3e\\r\\n                                  \\x3c!--<input [ngModelOptions]=\"{standalone: true}\" [(ngModel)]=\"p.p_price\" value=\"{{p.p_price}}\" type=\"number\">--\\x3e\\r\\n                                \\x3c!--</label>--\\x3e\\r\\n                              \\x3c!--</td>--\\x3e\\r\\n                              <td>\\r\\n                                <label class=\"input wi-100\">\\r\\n                                  <input *ngIf=\"isDetail==\\'detail\\'\" disabled=\"disabled\" [ngModelOptions]=\"{standalone: true}\" [(ngModel)]=\"p.p_count\" value=\"{{p.p_count}}\" type=\"number\">\\r\\n                                  <input *ngIf=\"isDetail!=\\'detail\\'\" [ngModelOptions]=\"{standalone: true}\" [(ngModel)]=\"p.p_count\" value=\"{{p.p_count}}\" type=\"number\">\\r\\n                                </label>\\r\\n                              </td>\\r\\n                              <td>\\r\\n                                <label class=\"input wi-100\">\\r\\n                                  <input *ngIf=\"isDetail==\\'detail\\'\" disabled=\"disabled\" [ngModelOptions]=\"{standalone: true}\" [(ngModel)]=\"p.p_price\" value=\"{{p.p_price}}\" type=\"text\">\\r\\n                                  <input *ngIf=\"isDetail!=\\'detail\\'\" [ngModelOptions]=\"{standalone: true}\" [(ngModel)]=\"p.p_price\" value=\"{{p.p_price}}\" type=\"number\">\\r\\n                                </label>\\r\\n                              </td>\\r\\n                              <td>{{p.p_count * p.p_price}}</td>\\r\\n                              <td>\\r\\n                                <label class=\"input wi-100\">\\r\\n                                  <input *ngIf=\"isDetail==\\'detail\\'\" disabled=\"disabled\" [ngModelOptions]=\"{standalone: true}\" [(ngModel)]=\"p.p_total_price\" value=\"{{p.p_total_price}}\" type=\"text\">\\r\\n                                  <input *ngIf=\"isDetail!=\\'detail\\'\" [ngModelOptions]=\"{standalone: true}\" [(ngModel)]=\"p.p_total_price\" value=\"{{p.p_total_price}}\" type=\"number\">\\r\\n                                </label>\\r\\n                              </td>\\r\\n                            </tr>\\r\\n                            </tbody>\\r\\n                            <tfoot>\\r\\n                            <tr class=\"he-40\">\\r\\n                              <th></th>\\r\\n                              <th></th>\\r\\n                              <th></th>\\r\\n                              <th></th>\\r\\n                              <th></th>\\r\\n                              <th></th>\\r\\n                              <th></th>\\r\\n                              <th></th>\\r\\n                              <th></th>\\r\\n                              <th></th>\\r\\n                            </tr>\\r\\n                            </tfoot>\\r\\n                          </table>\\r\\n                        </div>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 \">\\r\\n                    <section>\\r\\n                      <label class=\"label\">\\u5907\\u6ce8</label>\\r\\n                      <label class=\"textarea textarea-resizable\">\\r\\n                        <textarea *ngIf=\"isDetail==\\'detail\\'\" disabled=\"disabled\" class=\"custom-scroll\" rows=\"2\" name=\"stock_allot_remark\" formControlName=\"stock_allot_remark\"></textarea>\\r\\n                        <textarea *ngIf=\"isDetail!=\\'detail\\'\" class=\"custom-scroll\" rows=\"2\" name=\"stock_allot_remark\" formControlName=\"stock_allot_remark\"></textarea>\\r\\n                      </label>\\r\\n                    </section>\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-20\">\\r\\n                    <div class=\"label \">\\u5ba1\\u6279\\u4eba<a *ngIf=\"isDetail!=\\'detail\\'\" class=\"txt-color-blue pd-10\" (click)=\"showDetail(\\'assign\\')\">\\u6dfb\\u52a0\\u5ba1\\u6279\\u4eba</a></div>\\r\\n                    <ul  class=\"avatars\" *ngIf=\"approve_user\">\\r\\n                      <li *ngFor=\"let su of approve_user;let ind = index;\">\\r\\n                        <a *ngIf=\"isDetail!=\\'detail\\'\" class=\"fa fa-times-circle picture-a\" style=\"display:block;\" (click)=\"removeUser(su.id,\\'assign\\')\"></a>\\r\\n                        <a class=\"portrait-size\" title=\"{{su.u_username}}\">\\r\\n                          {{su.u_username}}\\r\\n                        </a>\\r\\n                        <div class=\"approval-arrow\" *ngIf=\"ind < approve_user.length && ind != 0\" >\\r\\n                          <img  src=\"assets/img/icon/arrow.png\" >\\r\\n                        </div>\\r\\n                      </li>\\r\\n                    </ul>\\r\\n                  </div>\\r\\n                  <div class=\"form-group col col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-20\">\\r\\n                    <div class=\"label \">\\u6284\\u9001\\u4eba<a *ngIf=\"isDetail!=\\'detail\\'\" class=\"txt-color-blue pd-10\" (click)=\"showDetail(\\'follower\\')\">\\u6dfb\\u52a0\\u6284\\u9001\\u4eba</a><span class=\"txt-color-blueLight pd-10\">(\\u5ba1\\u6279\\u901a\\u8fc7\\u540e\\uff0c\\u901a\\u77e5\\u6284\\u9001\\u4eba)</span></div>\\r\\n                    <ul  class=\"avatars\" *ngIf=\"follower_user\">\\r\\n                      <li *ngFor=\"let su1 of follower_user;let ind1 = index;\">\\r\\n                        <a *ngIf=\"isDetail!=\\'detail\\'\" class=\"fa fa-times-circle picture-a\" style=\"display:block;\" (click)=\"removeUser(su1.id,\\'follower\\')\"></a>\\r\\n                        <a class=\"portrait-size\" title=\"{{su1.u_username}}\">\\r\\n                          {{su1.u_username}}\\r\\n                        </a>\\r\\n                      </li>\\r\\n                    </ul>\\r\\n                  </div>\\r\\n                </fieldset>\\r\\n                <footer>\\r\\n                  <button type=\"button\" class=\"btn btn-primary\"  (click)=\"showDetail(\\'transfer\\')\" *ngIf=\"uid == stockallotInfo?.result?.stock_allot_status\">\\r\\n                    \\u8f6c\\u4ea4\\r\\n                  </button>\\r\\n                  <button type=\"button\" class=\"btn btn-primary\" (click)=\"showModal(\\'urge\\',\\'urge\\')\" *ngIf=\"uid == stockallotInfo?.result?.u_id && stockallotInfo?.result?.stock_allot_status != \\'yes\\' && stockallotInfo?.result?.stock_allot_status != \\'no\\' && stockallotInfo?.result?.stock_allot_status != \\'cancel\\'\" >\\r\\n                    \\u50ac\\u529e\\r\\n                  </button>\\r\\n                  <button type=\"button\" class=\"btn btn-primary\" (click)=\"showModal(\\'operation\\',\\'back_cancel\\')\" *ngIf=\"uid == stockallotInfo?.result?.u_id && stockallotInfo?.result?.stock_allot_status == \\'cancel\\'\">\\r\\n                    \\u5f03\\u5e9f\\r\\n                  </button>\\r\\n                  <button type=\"button\" class=\"btn btn-warning\"  (click)=\"showModal(\\'operation\\',\\'cancel\\')\" *ngIf=\"uid == stockallotInfo?.result?.u_id && stockallotInfo?.result?.stock_allot_status != \\'yes\\' && stockallotInfo?.result?.stock_allot_status != \\'no\\' && stockallotInfo?.result?.stock_allot_status != \\'cancel\\'\">\\r\\n                    \\u4f5c\\u5e9f\\r\\n                  </button>\\r\\n                  <button type=\"button\" class=\"btn btn-warning\" (click)=\"showModal(\\'operation\\',\\'operation\\')\" *ngIf=\"uid == stockallotInfo?.result?.stock_allot_status\">\\r\\n                    \\u5ba1\\u6838\\r\\n                  </button>\\r\\n\\r\\n                  <button type=\"button\" class=\"btn btn-default\" [routerLink]=\"[\\'/inventory-management/inventory-requisition\\']\">\\r\\n                    \\u8fd4\\u56de\\r\\n                  </button>\\r\\n                  \\x3c!--<button type=\"button\" class=\"btn btn-success btn-sm\" ><span class=\"glyphicon glyphicon-plus\"></span>\\u4fdd\\u5b58\\u5e76\\u65b0\\u589e</button>--\\x3e\\r\\n                  \\x3c!--<button [disabled]=\"isDetail==\\'detail\\'\" type=\"submit\" class=\"btn btn-primary\">--\\x3e\\r\\n                    \\x3c!--\\u4fdd\\u5b58--\\x3e\\r\\n                  \\x3c!--</button>--\\x3e\\r\\n                  <button *ngIf=\"stock_allot_id==0\" type=\"submit\" class=\"btn btn-primary\">\\u4fdd\\u5b58</button>\\r\\n                  <button *ngIf=\"isDetail!=\\'detail\\' && stock_allot_id!=0 && stockallotInfo?.result?.stock_allot_status != \\'no\\' && stockallotInfo?.result?.stock_allot_status != \\'yes\\' && stockallotInfo?.result?.stock_allot_status != \\'cancel\\'\" type=\"submit\" class=\"btn btn-primary\">\\u4fee\\u6539</button>\\r\\n\\r\\n                </footer>\\r\\n              </form>\\r\\n            </div>\\r\\n          </div>\\r\\n        </sa-widget>\\r\\n      </article>\\r\\n    </div>\\r\\n  </sa-widgets-grid>\\r\\n</div>\\r\\n\\r\\n<div bsModal #lgModal=\"bs-modal\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\\r\\n  <div class=\"modal-dialog\">\\r\\n    <div class=\"modal-content\">\\r\\n      <div class=\"modal-header\">\\r\\n        \\x3c!-- \\u5173\\u95ed\\u6309\\u94ae --\\x3e\\r\\n        <button type=\"button\" class=\"close\" (click)=\"lgModal.hide()\"> \\xd7 </button>\\r\\n        \\x3c!-- \\u6807\\u9898 --\\x3e\\r\\n        <h3 class=\"modal-title txt-color-blue\" data-ng-bind=\\'results.title\\'><i class=\"fa-fw fa fa-plus\"></i>\\u9009\\u62e9\\u5546\\u54c1</h3>\\r\\n      </div>\\r\\n      <div class=\"modal-body \">\\r\\n        <div  class=\"row\">\\r\\n          <article  class=\"col-sm-12\">\\r\\n            <div class=\"navbar navbar-default\">\\r\\n              <div class=\"collapse navbar-collapse\">\\r\\n\\r\\n                <form  class=\"navbar-form navbar-left ng-pristine ng-valid ng-touched\" novalidate=\"\" role=\"search\" >\\r\\n                  <div class=\"form-group pdlr-4\">\\r\\n                    <div class=\"form-group padding-left-10\">\\r\\n                      <input  class=\"form-control ng-pristine ng-valid ng-touched\" maxlength=\"15\" [(ngModel)]=\"keyword_product\"  name=\"keyword_product\" placeholder=\"\\u8bf7\\u8f93\\u5165\\u641c\\u7d22\\u5185\\u5bb9\" type=\"text\">\\r\\n                    </div>\\r\\n                    <button class=\"btn btn-default\" type=\"button\" (click)=\"searchKey(1)\">\\r\\n                      <i  class=\"glyphicon glyphicon-search\"></i>\\r\\n                      \\u641c\\u7d22\\r\\n                    </button>\\r\\n                  </div>\\r\\n\\r\\n                </form>\\r\\n              </div>\\r\\n            </div>\\r\\n          </article>\\r\\n        </div>\\r\\n        <div class=\"pt \">\\r\\n          <div class=\"row margin-b50\" style=\"padding:0 10px;\">\\r\\n            <article class=\"form-group col col-xs-4 \">\\r\\n              <sa-widget class=\"jarviswidget well\" [colorbutton]=\"false\" [editbutton]=\"false\" [togglebutton]=\"false\"\\r\\n                         [deletebutton]=\"false\" [fullscreenbutton]=\"false\" [custombutton]=\"false\" [sortable]=\"false\">\\r\\n                <div>\\r\\n                  <div class=\"widget-body no-padding\">\\r\\n                    <alert type=\"info\" class=\"no-margin\"  >\\r\\n                      <i class=\"fa-fw fa fa-sitemap\"></i>\\r\\n                      \\u5546\\u54c1\\u5206\\u7c7b\\r\\n                    </alert>\\r\\n                    <div class=\"pd-10 border-overflow-320\" style=\"margin-top: -11px;\">\\r\\n                      <div class=\"widget-body  \">\\r\\n                        <div class=\"tree smart-form\">\\r\\n                          <ul class=\"\">\\r\\n                            <li class=\" parent_li\">\\r\\n                                  <span><label class=\"checkbox inline-block tree-label pt-12 \">\\r\\n                                          <input type=\"checkbox\" name=\"checkbox-inline\" [checked]=\"select_category_ids[0]\" (click)=\"selectCategoryAll()\"><i></i>\\r\\n                                        </label>\\r\\n                                    <i class=\"fa fa-lg fa-folder-open\"></i>\\u5168\\u90e8\\r\\n                                    <i class=\"sa-icon fa fa-lg fa-plus-circle\" *ngIf=\"showUl == 0\" (click)=\"showLeftUl(1)\"></i>\\r\\n                                    <i class=\"sa-icon fa fa-lg fa-minus-circle\" *ngIf=\"showUl == 1\" (click)=\"showLeftUl(0)\"></i>\\r\\n                                  </span>\\r\\n                              <ul class=\"\" *ngIf=\"showUl == 1\">\\r\\n                                <li class=\" parent_li\" *ngFor=\"let c of productDefault?.result?.categoryList;let ind = index;\">\\r\\n                                    <span>\\r\\n                                      <label class=\"checkbox inline-block tree-label \">\\r\\n                                        <input type=\"checkbox\" name=\"checkbox-inline\" [checked]=\"select_category_ids[c.category_id]\" (click)=\"selectCategory(c.category_id,ind,0,1)\">\\r\\n                                        <i></i>{{c.category_desc}}\\r\\n                                        <em class=\"txt-color-blue\">({{c.child_count}})</em>\\r\\n                                      </label>\\r\\n                                      <i class=\"sa-icon fa fa-lg fa-minus-circle\" *ngIf=\"showUlChild == c.category_id && c.has_child != 0\" (click)=\"showLeftUlChild(0)\"></i>\\r\\n                                      <i class=\"sa-icon fa fa-lg fa-plus-circle\" *ngIf=\"showUlChild != c.category_id && c.has_child != 0\" (click)=\"showLeftUlChild(c.category_id)\"></i>\\r\\n                                    </span>\\r\\n                                  <ul class=\"\" *ngIf=\"showUlChild == c.category_id\">\\r\\n                                    <li *ngFor=\"let dc of c.child;let indChild = index;\">\\r\\n                                        <span>\\r\\n                                          <label class=\"checkbox inline-block tree-label\">\\r\\n                                            <input type=\"checkbox\" name=\"checkbox-inline\" [checked]=\"select_category_ids[c.category_id] || select_category_ids[dc.category_id]\" (click)=\"selectCategory(dc.category_id,ind,indChild,c.category_id)\">\\r\\n                                            <i></i>{{dc.category_desc}}\\r\\n                                            <em class=\"txt-color-blue\">({{c.child_count}})</em>\\r\\n                                          </label>\\r\\n                                        </span>\\r\\n                                    </li>\\r\\n                                  </ul>\\r\\n                                </li>\\r\\n                              </ul>\\r\\n                            </li>\\r\\n                          </ul>\\r\\n                        </div>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                    <div class=\"dt-toolbar\">\\r\\n                    </div>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </sa-widget>\\r\\n            </article>\\r\\n            <article class=\"form-group col col-xs-8 \">\\r\\n              <sa-widget class=\"jarviswidget well\" [colorbutton]=\"false\" [editbutton]=\"false\" [togglebutton]=\"false\"\\r\\n                         [deletebutton]=\"false\" [fullscreenbutton]=\"false\" [custombutton]=\"false\" [sortable]=\"false\">\\r\\n                <div>\\r\\n                  <div class=\"widget-body no-padding\">\\r\\n                    <alert type=\"info\" class=\"no-margin\" >\\r\\n                      <i class=\"fa-fw fa fa-table\"></i>\\r\\n                      \\u5546\\u54c1\\u5217\\u8868\\r\\n                    </alert>\\r\\n                    <div class=\"mt-10 \"  style=\"padding:0;\">\\r\\n                      <div style=\"padding: 0;z-index: 1;\" class=\"table-responsive border-overflow-320\">\\r\\n                        <table class=\"table table-striped  table-hover smart-form table-height-32\">\\r\\n                          <thead>\\r\\n                          <tr>\\r\\n                            <td><label class=\"checkbox mt-8\">\\r\\n                              <input type=\"checkbox\" name=\"checkbox-inline\" [checked]=\"check\" (change)=\"changeCheckAll($event)\">\\r\\n                              <i></i>\\r\\n                            </label>\\r\\n                            </td>\\r\\n                            <th>\\u5546\\u54c1\\u7f16\\u53f7</th>\\r\\n                            <th>\\u5546\\u54c1\\u5c5e\\u6027</th>\\r\\n                            <th>\\u5546\\u54c1\\u540d\\u79f0</th>\\r\\n                            <th>\\u5546\\u54c1\\u50a8\\u91cf</th>\\r\\n                            <th>\\u5546\\u54c1\\u5206\\u7c7b</th>\\r\\n                            <th>\\u751f\\u4ea7\\u5382\\u5bb6</th>\\r\\n                            <th>\\u53c2\\u8003\\u552e\\u4ef7</th>\\r\\n                            <th>\\u56fe\\u7247</th>\\r\\n                            <th>\\u72b6\\u6001</th>\\r\\n                          </tr>\\r\\n                          </thead>\\r\\n                          <tbody>\\r\\n                          <tr  *ngFor=\"let p of searchProductList?.result?.productList?.data;let ind = index;\">\\x3c!-- class=\"table-color\"--\\x3e\\r\\n                            <td>\\r\\n                              <label class=\"checkbox padding-top-10\" >\\r\\n                                <input type=\"checkbox\" name=\"checkbox-inline\" value=\"{{ p.p_id }}\" [checked]=\"selects[p.p_id]\" (change)=\"handle($event,ind)\">\\r\\n                                <i></i>\\r\\n                              </label>\\r\\n                            </td>\\r\\n                            <td>{{p.p_product_id}}</td>\\r\\n                            <td>{{p.p_property==1?\\'\\u9500\\u552e\\':\\'\\u5916\\u8d2d\\'}}</td>\\r\\n                            <td>{{p.p_name}}</td>\\r\\n                            <td>3</td>\\r\\n                            <td>{{p.category}}</td>\\r\\n                            <td>{{p.c_name}}</td>\\r\\n                            <td>{{p.p_purchase_price}}</td>\\r\\n                            <td>\\r\\n                              <div style=\"height:auto;\" >\\r\\n                                <img *ngFor=\"let img of p.imgs\" alt=\"\" height=\"22\" width=\"22\" class=\"img-picture\" src=\"{{url}}{{img}}\">\\r\\n                              </div>\\r\\n                            </td>\\r\\n                            <td>\\r\\n                              <span [ngSwitch]=\"p.p_status\">\\r\\n                                    <span class=\"label-normal\" *ngSwitchCase=\"1\">\\u6b63\\u5e38</span>\\r\\n                                    <span class=\"label-invalid\" *ngSwitchCase=\"2\">\\u65e0\\u6548</span>\\r\\n                              </span>\\r\\n                              </td>\\r\\n                          </tr>\\r\\n                          </tbody>\\r\\n                        </table>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                    \\x3c!-- \\u5e95\\u90e8-\\uff08\\u5206\\u9875\\u90e8\\u5206\\uff09--\\x3e\\r\\n                    <div class=\"dt-toolbar\">\\r\\n                      <div class=\"col-xs-12 col-sm-6\">\\r\\n                        <span>\\u5171{{ searchProductList?.result?.productList?.total}}\\u6761</span>\\r\\n                      </div>\\r\\n                      <div class=\"hidden-xs right\">\\r\\n                        <ul class=\"pagination pagination-sm\">\\r\\n                          <li *ngFor=\"let p of searchProductList?.result?.page\" class=\"{{p.class}}\">\\r\\n                            <a (click)=\"pagination(p.value)\" *ngIf=\"p.method==\\'method\\'\">{{p.text}}</a>\\r\\n                            <a *ngIf=\"p.method==\\'\\'\">{{p.text}}</a>\\r\\n                          </li>\\r\\n                        </ul>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </sa-widget>\\r\\n              \\x3c!-- end widget --\\x3e\\r\\n            </article>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\"modal-footer\">\\r\\n        <button type=\"button\" class=\"btn btn-success btn-sm\" (click)=\"addInput();lgModal.hide()\"><span class=\"glyphicon glyphicon-plus\"></span>\\u9009\\u5165</button>\\r\\n        <button type=\"button\" class=\"btn btn-default\" (click)=\"closeSubmit();lgModal.hide()\">\\u8fd4\\u56de</button>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<app-select-user (approve_users)=\"getData($event)\" [is_show_detail]=\"is_show_detail\" (is_show_details)=\"getShowStatus($event)\" [approval_or_copy]=\"approval_or_copy\" *ngIf=\"is_show_detail\"></app-select-user>\\r\\n<app-verify-frame [log_type]=\"log_type\" [log_table_name]=\"log_table_name\" [operate_type]=\"operate_type\" [username]=\"stockallotInfo?.result?.u_username\" [order_number]=\"stockallotInfo?.result?.stock_allot_number\" [pr_id]=\"stock_allot_id\" [create_user_id]=\"create_user_id\" [operate_button_type_is_more]=\"operate_button_type_is_more\" [operate_button_type]=\"operate_button_type\" (operate_types)=\"getOperateTypes($event)\"></app-verify-frame>\\r\\n'}});","extractedComments":[]}